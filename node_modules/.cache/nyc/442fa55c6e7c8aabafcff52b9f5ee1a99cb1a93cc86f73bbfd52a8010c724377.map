{"version":3,"sources":["validation.js"],"names":["Validation","req","res","next","schema","Joi","object","keys","title","string","trim","min","max","required","article","checkValidator","email","minDomainSegments","first_name","strict","regex","last_name","alphanum","gender","jobRole","validate","body","abortEarly","convert","error","errors","details","errArr","forEach","err","push","message","split","join","status","send"],"mappings":";;;;;;;;;;;;;;;AAAA;;AAGC;IACaA,U;;;;;;;;;AACb;2CAC8BC,G,EAAKC,G,EAAKC,I,EAAM;AAC7C,UAAMC,MAAM,GAAGC,gBAAIC,MAAJ,GAAaC,IAAb,CAAkB;AAC7BC,QAAAA,KAAK,EAAEH,gBAAII,MAAJ,GACNC,IADM,GAENC,GAFM,CAEF,CAFE,EAGNC,GAHM,CAGF,EAHE,EAINC,QAJM,EADsB;AAM7BC,QAAAA,OAAO,EAAET,gBAAII,MAAJ,GACRC,IADQ,GAERC,GAFQ,CAEJ,EAFI,EAGRC,GAHQ,CAGJ,GAHI,EAIRC,QAJQ;AANoB,OAAlB,CAAf;;AAaAE,MAAAA,cAAc,CAACd,GAAD,EAAMC,GAAN,EAAWE,MAAX,EAAmBD,IAAnB,CAAd;AACD,K,CAEC;;;;kCAEqBF,G,EAAKC,G,EAAKC,I,EAAM;AAAA;;AACnC,UAAMC,MAAM,GAAGC,gBAAIC,MAAJ,GAAaC,IAAb;AACbS,QAAAA,KAAK,EAAEX,gBAAII,MAAJ,GACJO,KADI,CACE;AAAEC,UAAAA,iBAAiB,EAAE;AAArB,SADF,EAEJJ,QAFI,EADM;AAIbK,QAAAA,UAAU,EAAEb,gBAAII,MAAJ,GACTU,MADS,GAETT,IAFS,GAGTU,KAHS,CAGH,2BAHG,EAITT,GAJS,CAIL,CAJK,EAKTC,GALS,CAKL,EALK,EAMTC,QANS,EAJC;AAWbQ,QAAAA,SAAS,EAAEhB,gBAAII,MAAJ,GACRa,QADQ,GAERH,MAFQ,GAGRT,IAHQ,GAIRU,KAJQ,CAIF,2BAJE,EAKRT,GALQ,CAKJ,CALI,EAMRC,GANQ,CAMJ,EANI,EAORC,QAPQ,EAXE;AAmBXU,QAAAA,MAAM,EAAElB,gBAAII,MAAJ,GACPa,QADO,GAEPH,MAFO,GAGPT,IAHO,GAIPU,KAJO,CAID,2BAJC,EAKPT,GALO,CAKH,CALG,EAMPC,GANO,CAMH,CANG,EAOPC,QAPO,EAnBG;AA2BXW,QAAAA,OAAO,EAAEnB,gBAAII,MAAJ,GACRa,QADQ,GAERH,MAFQ,GAGRT,IAHQ,GAIRU,KAJQ,CAIF,2BAJE,EAKRT,GALQ,CAKJ,CALI,EAMRE,QANQ;AA3BE,uEAkCFR,gBAAII,MAAJ,GACRa,QADQ,GAERH,MAFQ,GAGRT,IAHQ,GAIRU,KAJQ,CAIF,2BAJE,EAKRT,GALQ,CAKJ,CALI,EAMRE,QANQ,EAlCE,kEAyCHR,gBAAII,MAAJ,GACPE,GADO,CACH,CADG,EAEPC,GAFO,CAEH,EAFG,EAGPC,QAHO,EAzCG,oEA6CDR,gBAAII,MAAJ,GACTa,QADS,GAETH,MAFS,GAGTT,IAHS,GAITU,KAJS,CAIH,2BAJG,EAKTT,GALS,CAKL,CALK,EAMTE,QANS,EA7CC,iEAoDJR,gBAAII,MAAJ,GACNa,QADM,GAENH,MAFM,GAGNT,IAHM,GAINU,KAJM,CAIA,2BAJA,EAKNT,GALM,CAKF,CALE,EAMNE,QANM,EApDI,qBAAf;;AA6DAE,MAAAA,cAAc,CAACd,GAAD,EAAMC,GAAN,EAAWE,MAAX,EAAmBD,IAAnB,CAAd;AAID,K,CACA;;;;yCAE0BF,G,EAAKC,G,EAAKC,I,EAAM;AAC3C,UAAMC,MAAM,GAAGC,gBAAIC,MAAJ,GAAaC,IAAb,CAAkB;AAC/BO,QAAAA,OAAO,EAAET,gBAAII,MAAJ,GACNE,GADM,CACF,EADE,EAENC,GAFM,CAEF,GAFE,EAGNC,QAHM;AADsB,OAAlB,CAAf;;AASAE,MAAAA,cAAc,CAACd,GAAD,EAAMC,GAAN,EAAWE,MAAX,EAAmBD,IAAnB,CAAd;AACD;;;;;;;AAMM,IAAMY,cAAc,GAAG,SAAjBA,cAAiB,CAACd,GAAD,EAAMC,GAAN,EAAWE,MAAX,EAAmBD,IAAnB,EAA4B;AAAA,sBACtCE,gBAAIoB,QAAJ,CAAaxB,GAAG,CAACyB,IAAjB,EAAuBtB,MAAvB,EAA+B;AAACuB,IAAAA,UAAU,EAAE,KAAb;AAAmBC,IAAAA,OAAO,EAAE;AAA5B,GAA/B,CADsC;AAAA,MAChDC,KADgD,iBAChDA,KADgD;;AAExD,MAAIA,KAAJ,EAAW;AACT,QAAMC,MAAM,GAAG,EAAf;;AADS,eAEwBD,KAAK,IAAI,EAFjC;AAAA,4BAEDE,OAFC;AAAA,QAEQC,MAFR,6BAEiB,EAFjB;;AAGTA,IAAAA,MAAM,CAACC,OAAP,CAAe,UAAAC,GAAG,EAAI;AACpBJ,MAAAA,MAAM,CAACK,IAAP,CAAYD,GAAG,CAACE,OAAJ,CAAYC,KAAZ,CAAkB,GAAlB,EAAuBC,IAAvB,CAA4B,EAA5B,CAAZ;AACD,KAFD;AAIA,WAAOpC,GAAG,CAACqC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAED,MAAAA,MAAM,EAAE,GAAV;AAAe,iBAAUT;AAAzB,KAArB,CAAP;AAED;;AACD,SAAO3B,IAAI,EAAX;AAED,CAdM","sourceRoot":"/private/var/root/Documents/Teamwork/server/middleware","sourcesContent":["import Joi from '@hapi/joi';\n\n\n // all validation operation \n export class Validation {\n // article attributes validator\n static createArticleValidator(req, res, next) {\n  const schema = Joi.object().keys({\n      title: Joi.string()\n      .trim()\n      .min(2)\n      .max(50)\n      .required(),\n      article: Joi.string()\n      .trim()\n      .min(10)\n      .max(500)\n      .required(),    \n  });\n\n  checkValidator(req, res, schema, next);\n}\n\n  // user attributes validator\n\n  static userValidator(req, res, next) {\n    const schema = Joi.object().keys({\n      email: Joi.string()\n        .email({ minDomainSegments: 2 })\n        .required(),\n      first_name: Joi.string()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(2)\n        .max(30)\n        .required(),\n      last_name: Joi.string()\n        .alphanum()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(2)\n        .max(30)\n        .required(),\n        gender: Joi.string()\n        .alphanum()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(4)\n        .max(6)\n        .required(),\n        jobRole: Joi.string()\n        .alphanum()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(2)\n        .required(),\n        jobRole: Joi.string()\n        .alphanum()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(2)\n        .required(),\n      password: Joi.string()\n        .min(7)\n        .max(50)\n        .required(),\n      department: Joi.string()\n        .alphanum()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(2)\n        .required(),\n      address: Joi.string()\n        .alphanum()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(2)\n        .required(),\n\n    });\n    checkValidator(req, res, schema, next);\n\n\n\n  }\n   // edit article  attributes validator\n\n static editArticleValidator(req, res, next) {\n  const schema = Joi.object().keys({\n    article: Joi.string()\n      .min(10)\n      .max(500)\n      .required(),\n\n\n\n  });\n  checkValidator(req, res, schema, next);\n}\n\n\n\n}\n\nexport const checkValidator = (req, res, schema, next) => {\n  const { error } = Joi.validate(req.body, schema, {abortEarly: false,convert: true });\n  if (error) {\n    const errors = [];\n    const { details: errArr = [] } = error || {};\n    errArr.forEach(err => {\n      errors.push(err.message.split('\"').join(''));\n    });\n    \n    return res.status(400).send({ status: 400, 'message':errors}); \n \n  }\n  return next();\n\n};\n\n\n\n"]}