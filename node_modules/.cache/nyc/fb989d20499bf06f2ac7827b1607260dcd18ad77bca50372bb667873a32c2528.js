"use strict";var cov_2bmzm4vrhm=function(){var path="/private/var/root/Documents/teamwork-backend/server/controllers/article.js";var hash="8385f2a211ce8e6d26b057af77d0409e3cdbf554";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/private/var/root/Documents/teamwork-backend/server/controllers/article.js",statementMap:{"0":{start:{line:3,column:29},end:{line:3,column:84}},"1":{start:{line:5,column:0},end:{line:7,column:3}},"2":{start:{line:8,column:0},end:{line:8,column:28}},"3":{start:{line:10,column:23},end:{line:10,column:95}},"4":{start:{line:12,column:23},end:{line:12,column:95}},"5":{start:{line:14,column:20},end:{line:14,column:89}},"6":{start:{line:16,column:15},end:{line:16,column:66}},"7":{start:{line:18,column:15},end:{line:18,column:66}},"8":{start:{line:20,column:14},end:{line:20,column:55}},"9":{start:{line:22,column:20},end:{line:22,column:67}},"10":{start:{line:24,column:54},end:{line:24,column:73}},"11":{start:{line:24,column:75},end:{line:24,column:326}},"12":{start:{line:24,column:125},end:{line:24,column:161}},"13":{start:{line:24,column:163},end:{line:24,column:292}},"14":{start:{line:24,column:183},end:{line:24,column:292}},"15":{start:{line:24,column:225},end:{line:24,column:288}},"16":{start:{line:24,column:293},end:{line:24,column:324}},"17":{start:{line:24,column:327},end:{line:24,column:339}},"18":{start:{line:26,column:33},end:{line:26,column:518}},"19":{start:{line:26,column:46},end:{line:26,column:47}},"20":{start:{line:26,column:91},end:{line:26,column:131}},"21":{start:{line:26,column:133},end:{line:26,column:516}},"22":{start:{line:26,column:146},end:{line:26,column:256}},"23":{start:{line:26,column:193},end:{line:26,column:252}},"24":{start:{line:26,column:264},end:{line:26,column:516}},"25":{start:{line:26,column:304},end:{line:26,column:378}},"26":{start:{line:26,column:388},end:{line:26,column:514}},"27":{start:{line:26,column:429},end:{line:26,column:510}},"28":{start:{line:26,column:519},end:{line:26,column:533}},"29":{start:{line:30,column:0},end:{line:311,column:3}},"30":{start:{line:32,column:4},end:{line:32,column:52}},"31":{start:{line:35,column:2},end:{line:309,column:6}},"32":{start:{line:38,column:20},end:{line:38,column:92}},"33":{start:{line:40,column:23},end:{line:49,column:7}},"34":{start:{line:51,column:6},end:{line:51,column:43}},"35":{start:{line:53,column:6},end:{line:57,column:9}},"36":{start:{line:53,column:22},end:{line:57,column:9}},"37":{start:{line:58,column:6},end:{line:61,column:9}},"38":{start:{line:66,column:20},end:{line:66,column:92}},"39":{start:{line:68,column:24},end:{line:70,column:8}},"40":{start:{line:69,column:8},end:{line:69,column:64}},"41":{start:{line:72,column:6},end:{line:95,column:7}},"42":{start:{line:73,column:8},end:{line:89,column:9}},"43":{start:{line:74,column:10},end:{line:74,column:53}},"44":{start:{line:76,column:10},end:{line:83,column:13}},"45":{start:{line:85,column:10},end:{line:88,column:13}},"46":{start:{line:91,column:8},end:{line:94,column:11}},"47":{start:{line:100,column:20},end:{line:100,column:92}},"48":{start:{line:102,column:24},end:{line:104,column:8}},"49":{start:{line:103,column:8},end:{line:103,column:64}},"50":{start:{line:106,column:6},end:{line:128,column:7}},"51":{start:{line:107,column:8},end:{line:122,column:9}},"52":{start:{line:108,column:10},end:{line:108,column:49}},"53":{start:{line:109,column:10},end:{line:116,column:13}},"54":{start:{line:118,column:10},end:{line:121,column:13}},"55":{start:{line:124,column:8},end:{line:127,column:11}},"56":{start:{line:133,column:24},end:{line:135,column:8}},"57":{start:{line:134,column:8},end:{line:134,column:64}},"58":{start:{line:137,column:24},end:{line:139,column:8}},"59":{start:{line:138,column:8},end:{line:138,column:64}},"60":{start:{line:141,column:6},end:{line:163,column:7}},"61":{start:{line:141,column:23},end:{line:163,column:7}},"62":{start:{line:142,column:24},end:{line:146,column:10}},"63":{start:{line:147,column:8},end:{line:157,column:11}},"64":{start:{line:159,column:8},end:{line:162,column:11}},"65":{start:{line:164,column:6},end:{line:167,column:9}},"66":{start:{line:172,column:24},end:{line:174,column:8}},"67":{start:{line:173,column:8},end:{line:173,column:36}},"68":{start:{line:176,column:6},end:{line:184,column:7}},"69":{start:{line:178,column:8},end:{line:178,column:30}},"70":{start:{line:179,column:8},end:{line:183,column:11}},"71":{start:{line:186,column:6},end:{line:189,column:9}},"72":{start:{line:194,column:20},end:{line:194,column:92}},"73":{start:{line:196,column:24},end:{line:198,column:8}},"74":{start:{line:197,column:8},end:{line:197,column:64}},"75":{start:{line:200,column:6},end:{line:234,column:7}},"76":{start:{line:201,column:8},end:{line:228,column:9}},"77":{start:{line:202,column:27},end:{line:209,column:11}},"78":{start:{line:211,column:10},end:{line:211,column:47}},"79":{start:{line:213,column:10},end:{line:222,column:13}},"80":{start:{line:224,column:10},end:{line:227,column:13}},"81":{start:{line:230,column:8},end:{line:233,column:11}},"82":{start:{line:239,column:24},end:{line:241,column:8}},"83":{start:{line:240,column:8},end:{line:240,column:64}},"84":{start:{line:243,column:6},end:{line:260,column:7}},"85":{start:{line:244,column:8},end:{line:244,column:64}},"86":{start:{line:245,column:8},end:{line:254,column:11}},"87":{start:{line:256,column:8},end:{line:259,column:11}},"88":{start:{line:265,column:24},end:{line:267,column:8}},"89":{start:{line:266,column:8},end:{line:266,column:64}},"90":{start:{line:269,column:6},end:{line:285,column:7}},"91":{start:{line:270,column:8},end:{line:270,column:64}},"92":{start:{line:271,column:8},end:{line:279,column:11}},"93":{start:{line:281,column:8},end:{line:284,column:11}},"94":{start:{line:290,column:24},end:{line:292,column:8}},"95":{start:{line:291,column:8},end:{line:291,column:49}},"96":{start:{line:294,column:6},end:{line:302,column:7}},"97":{start:{line:296,column:8},end:{line:296,column:30}},"98":{start:{line:297,column:8},end:{line:301,column:11}},"99":{start:{line:304,column:6},end:{line:307,column:9}},"100":{start:{line:310,column:2},end:{line:310,column:17}},"101":{start:{line:313,column:15},end:{line:313,column:22}},"102":{start:{line:314,column:0},end:{line:314,column:30}}},fnMap:{"0":{name:"ownKeys",decl:{start:{line:24,column:9},end:{line:24,column:16}},loc:{start:{line:24,column:41},end:{line:24,column:341}},line:24},"1":{name:"(anonymous_1)",decl:{start:{line:24,column:208},end:{line:24,column:209}},loc:{start:{line:24,column:223},end:{line:24,column:290}},line:24},"2":{name:"_objectSpread",decl:{start:{line:26,column:9},end:{line:26,column:22}},loc:{start:{line:26,column:31},end:{line:26,column:535}},line:26},"3":{name:"(anonymous_3)",decl:{start:{line:26,column:176},end:{line:26,column:177}},loc:{start:{line:26,column:191},end:{line:26,column:254}},line:26},"4":{name:"(anonymous_4)",decl:{start:{line:26,column:412},end:{line:26,column:413}},loc:{start:{line:26,column:427},end:{line:26,column:512}},line:26},"5":{name:"(anonymous_5)",decl:{start:{line:30,column:0},end:{line:30,column:1}},loc:{start:{line:30,column:12},end:{line:311,column:1}},line:30},"6":{name:"Article",decl:{start:{line:31,column:11},end:{line:31,column:18}},loc:{start:{line:31,column:21},end:{line:33,column:3}},line:31},"7":{name:"createArticle",decl:{start:{line:37,column:20},end:{line:37,column:33}},loc:{start:{line:37,column:44},end:{line:62,column:5}},line:37},"8":{name:"deleteArticle",decl:{start:{line:65,column:20},end:{line:65,column:33}},loc:{start:{line:65,column:44},end:{line:96,column:5}},line:65},"9":{name:"(anonymous_9)",decl:{start:{line:68,column:49},end:{line:68,column:50}},loc:{start:{line:68,column:62},end:{line:70,column:7}},line:68},"10":{name:"editArticle",decl:{start:{line:99,column:20},end:{line:99,column:31}},loc:{start:{line:99,column:42},end:{line:129,column:5}},line:99},"11":{name:"(anonymous_11)",decl:{start:{line:102,column:49},end:{line:102,column:50}},loc:{start:{line:102,column:62},end:{line:104,column:7}},line:102},"12":{name:"getSpecificArticle",decl:{start:{line:132,column:20},end:{line:132,column:38}},loc:{start:{line:132,column:49},end:{line:168,column:5}},line:132},"13":{name:"(anonymous_13)",decl:{start:{line:133,column:49},end:{line:133,column:50}},loc:{start:{line:133,column:62},end:{line:135,column:7}},line:133},"14":{name:"(anonymous_14)",decl:{start:{line:137,column:49},end:{line:137,column:50}},loc:{start:{line:137,column:62},end:{line:139,column:7}},line:137},"15":{name:"getAllArticle",decl:{start:{line:171,column:20},end:{line:171,column:33}},loc:{start:{line:171,column:44},end:{line:190,column:5}},line:171},"16":{name:"(anonymous_16)",decl:{start:{line:172,column:51},end:{line:172,column:52}},loc:{start:{line:172,column:64},end:{line:174,column:7}},line:172},"17":{name:"comment",decl:{start:{line:193,column:20},end:{line:193,column:27}},loc:{start:{line:193,column:38},end:{line:235,column:5}},line:193},"18":{name:"(anonymous_18)",decl:{start:{line:196,column:49},end:{line:196,column:50}},loc:{start:{line:196,column:62},end:{line:198,column:7}},line:196},"19":{name:"flagArticle",decl:{start:{line:238,column:20},end:{line:238,column:31}},loc:{start:{line:238,column:42},end:{line:261,column:5}},line:238},"20":{name:"(anonymous_20)",decl:{start:{line:239,column:49},end:{line:239,column:50}},loc:{start:{line:239,column:62},end:{line:241,column:7}},line:239},"21":{name:"flagComment",decl:{start:{line:264,column:20},end:{line:264,column:31}},loc:{start:{line:264,column:42},end:{line:286,column:5}},line:264},"22":{name:"(anonymous_22)",decl:{start:{line:265,column:49},end:{line:265,column:50}},loc:{start:{line:265,column:62},end:{line:267,column:7}},line:265},"23":{name:"filterArticle",decl:{start:{line:289,column:20},end:{line:289,column:33}},loc:{start:{line:289,column:44},end:{line:308,column:5}},line:289},"24":{name:"(anonymous_24)",decl:{start:{line:290,column:51},end:{line:290,column:52}},loc:{start:{line:290,column:64},end:{line:292,column:7}},line:290}},branchMap:{"0":{loc:{start:{line:24,column:75},end:{line:24,column:326}},type:"if",locations:[{start:{line:24,column:75},end:{line:24,column:326}},{start:{line:24,column:75},end:{line:24,column:326}}],line:24},"1":{loc:{start:{line:24,column:163},end:{line:24,column:292}},type:"if",locations:[{start:{line:24,column:163},end:{line:24,column:292}},{start:{line:24,column:163},end:{line:24,column:292}}],line:24},"2":{loc:{start:{line:26,column:91},end:{line:26,column:131}},type:"cond-expr",locations:[{start:{line:26,column:114},end:{line:26,column:126}},{start:{line:26,column:129},end:{line:26,column:131}}],line:26},"3":{loc:{start:{line:26,column:133},end:{line:26,column:516}},type:"if",locations:[{start:{line:26,column:133},end:{line:26,column:516}},{start:{line:26,column:133},end:{line:26,column:516}}],line:26},"4":{loc:{start:{line:26,column:264},end:{line:26,column:516}},type:"if",locations:[{start:{line:26,column:264},end:{line:26,column:516}},{start:{line:26,column:264},end:{line:26,column:516}}],line:26},"5":{loc:{start:{line:53,column:6},end:{line:57,column:9}},type:"if",locations:[{start:{line:53,column:6},end:{line:57,column:9}},{start:{line:53,column:6},end:{line:57,column:9}}],line:53},"6":{loc:{start:{line:72,column:6},end:{line:95,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:95,column:7}},{start:{line:72,column:6},end:{line:95,column:7}}],line:72},"7":{loc:{start:{line:73,column:8},end:{line:89,column:9}},type:"if",locations:[{start:{line:73,column:8},end:{line:89,column:9}},{start:{line:73,column:8},end:{line:89,column:9}}],line:73},"8":{loc:{start:{line:106,column:6},end:{line:128,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:128,column:7}},{start:{line:106,column:6},end:{line:128,column:7}}],line:106},"9":{loc:{start:{line:107,column:8},end:{line:122,column:9}},type:"if",locations:[{start:{line:107,column:8},end:{line:122,column:9}},{start:{line:107,column:8},end:{line:122,column:9}}],line:107},"10":{loc:{start:{line:141,column:6},end:{line:163,column:7}},type:"if",locations:[{start:{line:141,column:6},end:{line:163,column:7}},{start:{line:141,column:6},end:{line:163,column:7}}],line:141},"11":{loc:{start:{line:141,column:23},end:{line:163,column:7}},type:"if",locations:[{start:{line:141,column:23},end:{line:163,column:7}},{start:{line:141,column:23},end:{line:163,column:7}}],line:141},"12":{loc:{start:{line:176,column:6},end:{line:184,column:7}},type:"if",locations:[{start:{line:176,column:6},end:{line:184,column:7}},{start:{line:176,column:6},end:{line:184,column:7}}],line:176},"13":{loc:{start:{line:200,column:6},end:{line:234,column:7}},type:"if",locations:[{start:{line:200,column:6},end:{line:234,column:7}},{start:{line:200,column:6},end:{line:234,column:7}}],line:200},"14":{loc:{start:{line:201,column:8},end:{line:228,column:9}},type:"if",locations:[{start:{line:201,column:8},end:{line:228,column:9}},{start:{line:201,column:8},end:{line:228,column:9}}],line:201},"15":{loc:{start:{line:243,column:6},end:{line:260,column:7}},type:"if",locations:[{start:{line:243,column:6},end:{line:260,column:7}},{start:{line:243,column:6},end:{line:260,column:7}}],line:243},"16":{loc:{start:{line:269,column:6},end:{line:285,column:7}},type:"if",locations:[{start:{line:269,column:6},end:{line:285,column:7}},{start:{line:269,column:6},end:{line:285,column:7}}],line:269},"17":{loc:{start:{line:294,column:6},end:{line:302,column:7}},type:"if",locations:[{start:{line:294,column:6},end:{line:302,column:7}},{start:{line:294,column:6},end:{line:302,column:7}}],line:294}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"8385f2a211ce8e6d26b057af77d0409e3cdbf554"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var _interopRequireDefault=(cov_2bmzm4vrhm.s[0]++,require("@babel/runtime/helpers/interopRequireDefault"));cov_2bmzm4vrhm.s[1]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2bmzm4vrhm.s[2]++;exports["default"]=void 0;var _defineProperty2=(cov_2bmzm4vrhm.s[3]++,_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")));var _classCallCheck2=(cov_2bmzm4vrhm.s[4]++,_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")));var _createClass2=(cov_2bmzm4vrhm.s[5]++,_interopRequireDefault(require("@babel/runtime/helpers/createClass")));var _article=(cov_2bmzm4vrhm.s[6]++,_interopRequireDefault(require("../model/article")));var _comment=(cov_2bmzm4vrhm.s[7]++,_interopRequireDefault(require("../model/comment")));var _moment=(cov_2bmzm4vrhm.s[8]++,_interopRequireDefault(require("moment")));var _jsonwebtoken=(cov_2bmzm4vrhm.s[9]++,_interopRequireDefault(require("jsonwebtoken")));function ownKeys(object,enumerableOnly){cov_2bmzm4vrhm.f[0]++;var keys=(cov_2bmzm4vrhm.s[10]++,Object.keys(object));cov_2bmzm4vrhm.s[11]++;if(Object.getOwnPropertySymbols){cov_2bmzm4vrhm.b[0][0]++;var symbols=(cov_2bmzm4vrhm.s[12]++,Object.getOwnPropertySymbols(object));cov_2bmzm4vrhm.s[13]++;if(enumerableOnly){cov_2bmzm4vrhm.b[1][0]++;cov_2bmzm4vrhm.s[14]++;symbols=symbols.filter(function(sym){cov_2bmzm4vrhm.f[1]++;cov_2bmzm4vrhm.s[15]++;return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}else{cov_2bmzm4vrhm.b[1][1]++;}cov_2bmzm4vrhm.s[16]++;keys.push.apply(keys,symbols);}else{cov_2bmzm4vrhm.b[0][1]++;}cov_2bmzm4vrhm.s[17]++;return keys;}function _objectSpread(target){cov_2bmzm4vrhm.f[2]++;cov_2bmzm4vrhm.s[18]++;for(var i=(cov_2bmzm4vrhm.s[19]++,1);i<arguments.length;i++){var source=(cov_2bmzm4vrhm.s[20]++,arguments[i]!=null?(cov_2bmzm4vrhm.b[2][0]++,arguments[i]):(cov_2bmzm4vrhm.b[2][1]++,{}));cov_2bmzm4vrhm.s[21]++;if(i%2){cov_2bmzm4vrhm.b[3][0]++;cov_2bmzm4vrhm.s[22]++;ownKeys(source,true).forEach(function(key){cov_2bmzm4vrhm.f[3]++;cov_2bmzm4vrhm.s[23]++;(0,_defineProperty2["default"])(target,key,source[key]);});}else{cov_2bmzm4vrhm.b[3][1]++;cov_2bmzm4vrhm.s[24]++;if(Object.getOwnPropertyDescriptors){cov_2bmzm4vrhm.b[4][0]++;cov_2bmzm4vrhm.s[25]++;Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{cov_2bmzm4vrhm.b[4][1]++;cov_2bmzm4vrhm.s[26]++;ownKeys(source).forEach(function(key){cov_2bmzm4vrhm.f[4]++;cov_2bmzm4vrhm.s[27]++;Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}}cov_2bmzm4vrhm.s[28]++;return target;}var Article=(/*#__PURE__*/cov_2bmzm4vrhm.s[29]++,function(){cov_2bmzm4vrhm.f[5]++;function Article(){cov_2bmzm4vrhm.f[6]++;cov_2bmzm4vrhm.s[30]++;(0,_classCallCheck2["default"])(this,Article);}cov_2bmzm4vrhm.s[31]++;(0,_createClass2["default"])(Article,null,[{key:"createArticle",value:function createArticle(req,res){cov_2bmzm4vrhm.f[7]++;var getUser=(cov_2bmzm4vrhm.s[32]++,_jsonwebtoken["default"].decode(req.headers.authorization.split(' ')[1]));var newArticle=(cov_2bmzm4vrhm.s[33]++,{article_id:_article["default"].length+1,title:req.body.title,article:req.body.article,category:req.body.category,createdOn:(0,_moment["default"])().format(),user_id:getUser.user_id,inappropriate:0,status:"unshare"});cov_2bmzm4vrhm.s[34]++;_article["default"].push(newArticle);cov_2bmzm4vrhm.s[35]++;if(newArticle){cov_2bmzm4vrhm.b[5][0]++;cov_2bmzm4vrhm.s[36]++;res.status(201).send({status:201,message:'article successfully created',data:_objectSpread({},newArticle)});}else{cov_2bmzm4vrhm.b[5][1]++;}cov_2bmzm4vrhm.s[37]++;return res.status(400).send({status:400,'message':'article not created'});}},{key:"deleteArticle",value:function deleteArticle(req,res){cov_2bmzm4vrhm.f[8]++;var getUser=(cov_2bmzm4vrhm.s[38]++,_jsonwebtoken["default"].decode(req.headers.authorization.split(' ')[1]));var findArticle=(cov_2bmzm4vrhm.s[39]++,_article["default"].find(function(t){cov_2bmzm4vrhm.f[9]++;cov_2bmzm4vrhm.s[40]++;return t.article_id===parseInt(req.params.article_id);}));cov_2bmzm4vrhm.s[41]++;if(findArticle){cov_2bmzm4vrhm.b[6][0]++;cov_2bmzm4vrhm.s[42]++;if(getUser.user_id===findArticle.user_id){cov_2bmzm4vrhm.b[7][0]++;cov_2bmzm4vrhm.s[43]++;_article["default"].splice(findArticle,1);cov_2bmzm4vrhm.s[44]++;return res.status(200).send({status:200,'message':'article successfully deleted',data:{title:findArticle.title,article:findArticle.article}});}else{cov_2bmzm4vrhm.b[7][1]++;cov_2bmzm4vrhm.s[45]++;return res.status(400).send({status:400,'message':'You did not make this article with article_id'});}}else{cov_2bmzm4vrhm.b[6][1]++;cov_2bmzm4vrhm.s[46]++;return res.status(404).send({status:404,'message':'article not found!'});}}},{key:"editArticle",value:function editArticle(req,res){cov_2bmzm4vrhm.f[10]++;var getUser=(cov_2bmzm4vrhm.s[47]++,_jsonwebtoken["default"].decode(req.headers.authorization.split(' ')[1]));var findArticle=(cov_2bmzm4vrhm.s[48]++,_article["default"].find(function(t){cov_2bmzm4vrhm.f[11]++;cov_2bmzm4vrhm.s[49]++;return t.article_id===parseInt(req.params.article_id);}));cov_2bmzm4vrhm.s[50]++;if(findArticle){cov_2bmzm4vrhm.b[8][0]++;cov_2bmzm4vrhm.s[51]++;if(getUser.user_id===findArticle.user_id){cov_2bmzm4vrhm.b[9][0]++;cov_2bmzm4vrhm.s[52]++;findArticle.article=req.body.article;cov_2bmzm4vrhm.s[53]++;return res.status(200).send({status:200,'message':'article successfully edited',data:{title:findArticle.title,article:findArticle.article}});}else{cov_2bmzm4vrhm.b[9][1]++;cov_2bmzm4vrhm.s[54]++;return res.status(400).send({status:400,'message':'You did not make this article with article_id'});}}else{cov_2bmzm4vrhm.b[8][1]++;cov_2bmzm4vrhm.s[55]++;return res.status(404).send({status:404,'message':'article not found!'});}}},{key:"getSpecificArticle",value:function getSpecificArticle(req,res){cov_2bmzm4vrhm.f[12]++;var findArticle=(cov_2bmzm4vrhm.s[56]++,_article["default"].find(function(t){cov_2bmzm4vrhm.f[13]++;cov_2bmzm4vrhm.s[57]++;return t.article_id===parseInt(req.params.article_id);}));var findComment=(cov_2bmzm4vrhm.s[58]++,_comment["default"].find(function(t){cov_2bmzm4vrhm.f[14]++;cov_2bmzm4vrhm.s[59]++;return t.article_id===parseInt(req.params.article_id);}));cov_2bmzm4vrhm.s[60]++;if(findArticle){cov_2bmzm4vrhm.b[10][0]++;cov_2bmzm4vrhm.s[61]++;if(findArticle.status==='share'){cov_2bmzm4vrhm.b[11][0]++;var _comments=(cov_2bmzm4vrhm.s[62]++,[{comment_id:findComment.comment_id,comment:findComment.comment,user_id:findComment.user_id}]);cov_2bmzm4vrhm.s[63]++;return res.status(200).send({status:200,'message':'success',data:{title:findArticle.title,article:findArticle.article,createdOn:findArticle.createdOn,user_id:findArticle.user_id,comments:_comments}});}else{cov_2bmzm4vrhm.b[11][1]++;cov_2bmzm4vrhm.s[64]++;return res.status(400).send({status:400,'message':'this article is not published now!'});}}else{cov_2bmzm4vrhm.b[10][1]++;}cov_2bmzm4vrhm.s[65]++;return res.status(404).send({status:404,'message':'article not found!'});}},{key:"getAllArticle",value:function getAllArticle(req,res){cov_2bmzm4vrhm.f[15]++;var findArticle=(cov_2bmzm4vrhm.s[66]++,_article["default"].filter(function(t){cov_2bmzm4vrhm.f[16]++;cov_2bmzm4vrhm.s[67]++;return t.status==="share";}));cov_2bmzm4vrhm.s[68]++;if(findArticle){cov_2bmzm4vrhm.b[12][0]++;cov_2bmzm4vrhm.s[69]++;//findArticle.sort();
findArticle.reverse();cov_2bmzm4vrhm.s[70]++;return res.status(200).send({status:200,'message':'success',data:findArticle});}else{cov_2bmzm4vrhm.b[12][1]++;}cov_2bmzm4vrhm.s[71]++;return res.status(404).send({status:404,'message':'article not found!'});}},{key:"comment",value:function comment(req,res){cov_2bmzm4vrhm.f[17]++;var getUser=(cov_2bmzm4vrhm.s[72]++,_jsonwebtoken["default"].decode(req.headers.authorization.split(' ')[1]));var findArticle=(cov_2bmzm4vrhm.s[73]++,_article["default"].find(function(t){cov_2bmzm4vrhm.f[18]++;cov_2bmzm4vrhm.s[74]++;return t.article_id===parseInt(req.params.article_id);}));cov_2bmzm4vrhm.s[75]++;if(findArticle){cov_2bmzm4vrhm.b[13][0]++;cov_2bmzm4vrhm.s[76]++;if(findArticle.status==='share'){cov_2bmzm4vrhm.b[14][0]++;var newComment=(cov_2bmzm4vrhm.s[77]++,{comment_id:_comment["default"].length+1,createdOn:(0,_moment["default"])().format(),article_id:findArticle.article_id,user_id:getUser.user_id,inappropriate:0,comment:req.body.comment});cov_2bmzm4vrhm.s[78]++;_comment["default"].push(newComment);cov_2bmzm4vrhm.s[79]++;return res.status(201).send({status:201,'message':'relevant-success-message',data:{createdOn:newComment.createdOn,title:findArticle.title,article:findArticle.article,comment:newComment.comment}});}else{cov_2bmzm4vrhm.b[14][1]++;cov_2bmzm4vrhm.s[80]++;return res.status(400).send({status:400,'message':'this article is not published now'});}}else{cov_2bmzm4vrhm.b[13][1]++;cov_2bmzm4vrhm.s[81]++;return res.status(404).send({status:404,'message':'article not found!'});}}},{key:"flagArticle",value:function flagArticle(req,res){cov_2bmzm4vrhm.f[19]++;var findArticle=(cov_2bmzm4vrhm.s[82]++,_article["default"].find(function(t){cov_2bmzm4vrhm.f[20]++;cov_2bmzm4vrhm.s[83]++;return t.article_id===parseInt(req.params.article_id);}));cov_2bmzm4vrhm.s[84]++;if(findArticle){cov_2bmzm4vrhm.b[15][0]++;cov_2bmzm4vrhm.s[85]++;findArticle.inappropriate=++findArticle.inappropriate;cov_2bmzm4vrhm.s[86]++;return res.status(200).send({status:200,'message':'article successfully flaged',data:{title:findArticle.title,article:findArticle.article,createdOn:findArticle.createdOn,inappropriate:findArticle.inappropriate}});}else{cov_2bmzm4vrhm.b[15][1]++;cov_2bmzm4vrhm.s[87]++;return res.status(404).send({status:404,'message':'Article not found!'});}}},{key:"flagComment",value:function flagComment(req,res){cov_2bmzm4vrhm.f[21]++;var findComment=(cov_2bmzm4vrhm.s[88]++,_comment["default"].find(function(t){cov_2bmzm4vrhm.f[22]++;cov_2bmzm4vrhm.s[89]++;return t.comment_id===parseInt(req.params.comment_id);}));cov_2bmzm4vrhm.s[90]++;if(findComment){cov_2bmzm4vrhm.b[16][0]++;cov_2bmzm4vrhm.s[91]++;findComment.inappropriate=++findComment.inappropriate;cov_2bmzm4vrhm.s[92]++;return res.status(200).send({status:200,'message':'comment successfully flaged',data:{comment:findComment.comment,createdOn:findComment.createdOn,inappropriate:findComment.inappropriate}});}else{cov_2bmzm4vrhm.b[16][1]++;cov_2bmzm4vrhm.s[93]++;return res.status(404).send({status:404,'message':'comment not found!'});}}},{key:"filterArticle",value:function filterArticle(req,res){cov_2bmzm4vrhm.f[23]++;var findArticle=(cov_2bmzm4vrhm.s[94]++,_article["default"].filter(function(t){cov_2bmzm4vrhm.f[24]++;cov_2bmzm4vrhm.s[95]++;return t.category===req.query.category;}));cov_2bmzm4vrhm.s[96]++;if(findArticle){cov_2bmzm4vrhm.b[17][0]++;cov_2bmzm4vrhm.s[97]++;//findArticle.sort();
findArticle.reverse();cov_2bmzm4vrhm.s[98]++;return res.status(200).send({status:200,'message':'success',data:findArticle});}else{cov_2bmzm4vrhm.b[17][1]++;}cov_2bmzm4vrhm.s[99]++;return res.status(404).send({status:404,'message':'article not found!'});}}]);cov_2bmzm4vrhm.s[100]++;return Article;}());var _default=(cov_2bmzm4vrhm.s[101]++,Article);cov_2bmzm4vrhm.s[102]++;exports["default"]=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFydGljbGUuanMiXSwibmFtZXMiOlsiQXJ0aWNsZSIsInJlcSIsInJlcyIsImdldFVzZXIiLCJqd3QiLCJkZWNvZGUiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInNwbGl0IiwibmV3QXJ0aWNsZSIsImFydGljbGVfaWQiLCJhcnRpY2xlcyIsImxlbmd0aCIsInRpdGxlIiwiYm9keSIsImFydGljbGUiLCJjYXRlZ29yeSIsImNyZWF0ZWRPbiIsImZvcm1hdCIsInVzZXJfaWQiLCJpbmFwcHJvcHJpYXRlIiwic3RhdHVzIiwicHVzaCIsInNlbmQiLCJtZXNzYWdlIiwiZGF0YSIsImZpbmRBcnRpY2xlIiwiZmluZCIsInQiLCJwYXJzZUludCIsInBhcmFtcyIsInNwbGljZSIsImZpbmRDb21tZW50IiwiY29tbWVudHMiLCJjb21tZW50X2lkIiwiY29tbWVudCIsImZpbHRlciIsInJldmVyc2UiLCJuZXdDb21tZW50IiwicXVlcnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7SUFHTUEsTzs7Ozs7Ozs7O2tDQUlnQkMsRyxFQUFLQyxHLEVBQUs7QUFDaEMsVUFBTUMsT0FBTyxHQUFHQyx5QkFBSUMsTUFBSixDQUFXSixHQUFHLENBQUNLLE9BQUosQ0FBWUMsYUFBWixDQUEwQkMsS0FBMUIsQ0FBZ0MsR0FBaEMsRUFBcUMsQ0FBckMsQ0FBWCxDQUFoQjs7QUFDQSxVQUFNQyxVQUFVLEdBQUc7QUFDbkJDLFFBQUFBLFVBQVUsRUFBQ0Msb0JBQVNDLE1BQVQsR0FBa0IsQ0FEVjtBQUVuQkMsUUFBQUEsS0FBSyxFQUFDWixHQUFHLENBQUNhLElBQUosQ0FBU0QsS0FGSTtBQUduQkUsUUFBQUEsT0FBTyxFQUFDZCxHQUFHLENBQUNhLElBQUosQ0FBU0MsT0FIRTtBQUluQkMsUUFBQUEsUUFBUSxFQUFDZixHQUFHLENBQUNhLElBQUosQ0FBU0UsUUFKQztBQUtuQkMsUUFBQUEsU0FBUyxFQUFDLDBCQUFT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LFdBQVcsQ0FBQ2YsU0FGbUU7QUFHekZHLFlBQUFBLGFBQWEsRUFBQ1ksV0FBVyxDQUFDWjtBQUgrRDtBQUEvRCxTQUFyQixDQUFQO0FBTUUsT0FWRixNQVdNO0FBQ0EsZUFBT2xCLEdBQUcsQ0FBQ21CLE1BQUosQ0FBVyxHQUFYLEVBQWdCRSxJQUFoQixDQUFxQjtBQUFFRixVQUFBQSxNQUFNLEVBQUUsR0FBVjtBQUFnQixxQkFBVTtBQUExQixTQUFyQixDQUFQO0FBQ0o7QUFDQTs7O2tDQUdxQnBCLEcsRUFBS0MsRyxFQUFLO0FBQy9CLFVBQU13QixXQUFXLEdBQUtmLG9CQUFTeUIsTUFBVCxDQUFnQixVQUFBUixDQUFDO0FBQUEsZUFBSUEsQ0FBQyxDQUFDWixRQUFGLEtBQWVmLEdBQUcsQ0FBQ3NDLEtBQUosQ0FBVXZCLFFBQTdCO0FBQUEsT0FBakIsQ0FBdEI7O0FBRUEsVUFBR1UsV0FBSCxFQUFlO0FBQ2I7QUFDREEsUUFBQUEsV0FBVyxDQUFDVyxPQUFaO0FBQ0csZUFBT25DLEdBQUcsQ0FBQ21CLE1BQUosQ0FBVyxHQUFYLEVBQWdCRSxJQUFoQixDQUFxQjtBQUFFRixVQUFBQSxNQUFNLEVBQUUsR0FBVjtBQUFlLHFCQUFXLFNBQTFCO0FBQXFDSSxVQUFBQSxJQUFJLEVBQUNDO0FBQTFDLFNBQXJCLENBQVA7QUFFQzs7QUFDRCxhQUFPeEIsR0FBRyxDQUFDbUIsTUFBSixDQUFXLEdBQVgsRUFBZ0JFLElBQWhCLENBQXFCO0FBQUVGLFFBQUFBLE1BQU0sRUFBRSxHQUFWO0FBQWdCLG1CQUFVO0FBQTFCLE9BQXJCLENBQVA7QUFHUDs7Ozs7ZUFNRXJCLE8iLCJzb3VyY2VSb290IjoiL3ByaXZhdGUvdmFyL3Jvb3QvRG9jdW1lbnRzL3RlYW13b3JrLWJhY2tlbmQvc2VydmVyL2NvbnRyb2xsZXJzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFydGljbGVzICBmcm9tICcuLi9tb2RlbC9hcnRpY2xlJztcbmltcG9ydCBjb21tZW50cyBmcm9tICcuLi9tb2RlbC9jb21tZW50JztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcblxuXG5jbGFzcyBBcnRpY2xlIHtcbiAgICBcblxuXG5zdGF0aWMgIGNyZWF0ZUFydGljbGUocmVxLCByZXMpIHtcbmNvbnN0IGdldFVzZXIgPSBqd3QuZGVjb2RlKHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3BsaXQoJyAnKVsxXSk7XG5jb25zdCBuZXdBcnRpY2xlID0ge1xuYXJ0aWNsZV9pZDphcnRpY2xlcy5sZW5ndGggKyAxLFxudGl0bGU6cmVxLmJvZHkudGl0bGUsXG5hcnRpY2xlOnJlcS5ib2R5LmFydGljbGUsXG5jYXRlZ29yeTpyZXEuYm9keS5jYXRlZ29yeSxcbmNyZWF0ZWRPbjptb21lbnQoKS5mb3JtYXQoKSxcbnVzZXJfaWQ6IGdldFVzZXIudXNlcl9pZCxcbmluYXBwcm9wcmlhdGU6MCxcbnN0YXR1czpcInVuc2hhcmVcIlxuXG59O1xuXG4gICAgYXJ0aWNsZXMucHVzaChuZXdBcnRpY2xlKTtcblxuXG5pZihuZXdBcnRpY2xlKVxuIHJlcy5zdGF0dXMoMjAxKS5zZW5kKHsgc3RhdHVzOiAyMDEsIG1lc3NhZ2U6J2FydGljbGUgc3VjY2Vzc2Z1bGx5IGNyZWF0ZWQnLGRhdGE6IHsgLi4ubmV3QXJ0aWNsZSB9IH0pO1xucmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgc3RhdHVzOiA0MDAsJ21lc3NhZ2UnOidhcnRpY2xlIG5vdCBjcmVhdGVkJyB9KTtcblxufVxuXG5zdGF0aWMgIGRlbGV0ZUFydGljbGUgKHJlcSwgcmVzKSB7XG4gIGNvbnN0IGdldFVzZXIgPSBqd3QuZGVjb2RlKHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3BsaXQoJyAnKVsxXSk7XG4gICAgY29uc3QgZmluZEFydGljbGUgPSAgIGFydGljbGVzLmZpbmQodCA9PiB0LmFydGljbGVfaWQgPT09IHBhcnNlSW50KHJlcS5wYXJhbXMuYXJ0aWNsZV9pZCkpO1xuICAgIGlmKGZpbmRBcnRpY2xlKXtcbiAgICAgICBcbiAgICAgICBpZihnZXRVc2VyLnVzZXJfaWQgPT09IGZpbmRBcnRpY2xlLnVzZXJfaWQpe1xuICAgICAgIGFydGljbGVzLnNwbGljZShmaW5kQXJ0aWNsZSwxKTtcblxuICBcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgc3RhdHVzOiAyMDAsICdtZXNzYWdlJzogJ2FydGljbGUgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQnLCBkYXRhOiB7XG4gICAgICAgICAgdGl0bGU6ZmluZEFydGljbGUudGl0bGUsXG4gICAgICAgICAgYXJ0aWNsZTpmaW5kQXJ0aWNsZS5hcnRpY2xlfX0pO1xuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgc3RhdHVzOiA0MDAsICdtZXNzYWdlJzonWW91IGRpZCBub3QgbWFrZSB0aGlzIGFydGljbGUgd2l0aCBhcnRpY2xlX2lkJ30pO1xuICAgICAgfVxuICAgICB9IFxuICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBzdGF0dXM6IDQwNCwgICdtZXNzYWdlJzonYXJ0aWNsZSBub3QgZm91bmQhJ30pO1xuICAgICB9XG4gICAgIH1cblxuXG4gICAgIHN0YXRpYyAgZWRpdEFydGljbGUgKHJlcSwgcmVzKSB7XG4gICAgICBjb25zdCBnZXRVc2VyID0gand0LmRlY29kZShyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uLnNwbGl0KCcgJylbMV0pO1xuICAgICAgICBjb25zdCBmaW5kQXJ0aWNsZSA9ICAgYXJ0aWNsZXMuZmluZCh0ID0+IHQuYXJ0aWNsZV9pZCA9PT0gcGFyc2VJbnQocmVxLnBhcmFtcy5hcnRpY2xlX2lkKSk7XG4gICAgICAgIGlmKGZpbmRBcnRpY2xlKXtcbiAgICAgICAgICAgXG4gICAgICAgICAgIGlmKGdldFVzZXIudXNlcl9pZCA9PT0gZmluZEFydGljbGUudXNlcl9pZCl7XG5cbiAgICAgICAgICAgIGZpbmRBcnRpY2xlLmFydGljbGUgPSByZXEuYm9keS5hcnRpY2xlO1xuICAgIFxuICAgICAgXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyBzdGF0dXM6IDIwMCwgJ21lc3NhZ2UnOiAnYXJ0aWNsZSBzdWNjZXNzZnVsbHkgZWRpdGVkJywgZGF0YToge1xuICAgICAgICAgICAgICB0aXRsZTpmaW5kQXJ0aWNsZS50aXRsZSxcbiAgICAgICAgICAgICAgYXJ0aWNsZTpmaW5kQXJ0aWNsZS5hcnRpY2xlfX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgc3RhdHVzOiA0MDAsICdtZXNzYWdlJzonWW91IGRpZCBub3QgbWFrZSB0aGlzIGFydGljbGUgd2l0aCBhcnRpY2xlX2lkJ30pO1xuICAgICAgICAgIH1cbiAgICAgICAgIH0gXG4gICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgc3RhdHVzOiA0MDQsICAnbWVzc2FnZSc6J2FydGljbGUgbm90IGZvdW5kISd9KTtcbiAgICAgICAgIH1cbiAgICAgICAgIH1cblxuXG4gICAgICAgICBzdGF0aWMgIGdldFNwZWNpZmljQXJ0aWNsZShyZXEsIHJlcykge1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGZpbmRBcnRpY2xlID0gICBhcnRpY2xlcy5maW5kKHQgPT4gdC5hcnRpY2xlX2lkID09PSBwYXJzZUludChyZXEucGFyYW1zLmFydGljbGVfaWQpKTtcbiAgICAgICAgICBjb25zdCBmaW5kQ29tbWVudCA9ICAgY29tbWVudHMuZmluZCh0ID0+IHQuYXJ0aWNsZV9pZCA9PT0gcGFyc2VJbnQocmVxLnBhcmFtcy5hcnRpY2xlX2lkKSk7XG4gIFxuICAgICAgICAgIFxuICAgICAgICAgIFxuICAgICAgICAgIGlmKGZpbmRBcnRpY2xlKVxuICAgICAgICAgIGlmKGZpbmRBcnRpY2xlLnN0YXR1cz09PSdzaGFyZScpe1xuICAgICAgICAgICAgY29uc3QgY29tbWVudHMgPSBbe1xuICAgICAgICAgICAgICBjb21tZW50X2lkOmZpbmRDb21tZW50LmNvbW1lbnRfaWQsXG4gICAgICAgICAgICAgIGNvbW1lbnQ6ZmluZENvbW1lbnQuY29tbWVudCxcbiAgICAgICAgICAgICAgdXNlcl9pZDpmaW5kQ29tbWVudC51c2VyX2lkLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcblxuXG4gIFxuICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoeyBzdGF0dXM6IDIwMCwgJ21lc3NhZ2UnOiAnc3VjY2VzcycsIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB0aXRsZTpmaW5kQXJ0aWNsZS50aXRsZSxcbiAgICAgICAgICAgICAgICBhcnRpY2xlOmZpbmRBcnRpY2xlLmFydGljbGUsXG4gICAgICAgICAgICAgICAgY3JlYXRlZE9uOmZpbmRBcnRpY2xlLmNyZWF0ZWRPbixcbiAgICAgICAgICAgICAgICB1c2VyX2lkOmZpbmRBcnRpY2xlLnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgY29tbWVudHN9fSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgc3RhdHVzOiA0MDAsICAnbWVzc2FnZSc6J3RoaXMgYXJ0aWNsZSBpcyBub3QgcHVibGlzaGVkIG5vdyEnfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgc3RhdHVzOiA0MDQsICAnbWVzc2FnZSc6J2FydGljbGUgbm90IGZvdW5kISd9KTtcbiAgICAgICAgICBcbiAgICAgIFxuICAgICAgfVxuXG5cbiAgICAgIHN0YXRpYyAgZ2V0QWxsQXJ0aWNsZShyZXEsIHJlcykge1xuICAgICAgICBjb25zdCBmaW5kQXJ0aWNsZSA9ICAgYXJ0aWNsZXMuZmlsdGVyKHQgPT4gdC5zdGF0dXMgPT09IFwic2hhcmVcIik7XG4gICAgICAgICAgXG4gICAgICAgIGlmKGZpbmRBcnRpY2xlKXtcbiAgICAgICAgICAvL2ZpbmRBcnRpY2xlLnNvcnQoKTtcbiAgICAgICAgICBmaW5kQXJ0aWNsZS5yZXZlcnNlKCk7XG4gICAgICAgICAgXG5cbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7IHN0YXR1czogMjAwLCAnbWVzc2FnZSc6ICdzdWNjZXNzJywgZGF0YTogXG4gICAgICAgICAgICBmaW5kQXJ0aWNsZX0pO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IHN0YXR1czogNDA0LCAgJ21lc3NhZ2UnOidhcnRpY2xlIG5vdCBmb3VuZCEnfSk7XG4gICAgICAgIFxuICAgIFxuICAgIH1cblxuXG5cblxuXG4gICAgICBzdGF0aWMgIGNvbW1lbnQgKHJlcSwgcmVzKSB7XG4gICAgICAgIGNvbnN0IGdldFVzZXIgPSBqd3QuZGVjb2RlKHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3BsaXQoJyAnKVsxXSk7XG4gICAgICAgICAgY29uc3QgZmluZEFydGljbGUgPSAgIGFydGljbGVzLmZpbmQodCA9PiB0LmFydGljbGVfaWQgPT09IHBhcnNlSW50KHJlcS5wYXJhbXMuYXJ0aWNsZV9pZCkpO1xuICAgICAgICAgIGlmKGZpbmRBcnRpY2xlKXtcbiAgICAgICAgICAgICBcbiAgICAgICAgICAgICBpZihmaW5kQXJ0aWNsZS5zdGF0dXMgPT09ICdzaGFyZScpe1xuICAgICAgICAgICAgICBjb25zdCBuZXdDb21tZW50ID0ge1xuICAgICAgICAgICAgICAgIGNvbW1lbnRfaWQ6Y29tbWVudHMubGVuZ3RoICsgMSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkT246bW9tZW50KCkuZm9ybWF0KCksXG4gICAgICAgICAgICAgICAgYXJ0aWNsZV9pZDpmaW5kQXJ0aWNsZS5hcnRpY2xlX2lkLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IGdldFVzZXIudXNlcl9pZCxcbiAgICAgICAgICAgICAgICBpbmFwcHJvcHJpYXRlOjAsXG4gICAgICAgICAgICAgICAgY29tbWVudDpyZXEuYm9keS5jb21tZW50XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfTtcbiAgXG4gICAgICAgICAgICAgIGNvbW1lbnRzLnB1c2gobmV3Q29tbWVudCk7XG4gICAgICBcbiAgICAgICAgXG4gICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IHN0YXR1czogMjAxLCAnbWVzc2FnZSc6ICdyZWxldmFudC1zdWNjZXNzLW1lc3NhZ2UnLCBkYXRhOiB7XG4gICAgICAgICAgICAgICAgY3JlYXRlZE9uOm5ld0NvbW1lbnQuY3JlYXRlZE9uLFxuICAgICAgICAgICAgICAgIHRpdGxlOmZpbmRBcnRpY2xlLnRpdGxlLFxuICAgICAgICAgICAgICAgIGFydGljbGU6ZmluZEFydGljbGUuYXJ0aWNsZSxcbiAgICAgICAgICAgICAgY29tbWVudDpuZXdDb21tZW50LmNvbW1lbnR9fSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoeyBzdGF0dXM6IDQwMCwgJ21lc3NhZ2UnOid0aGlzIGFydGljbGUgaXMgbm90IHB1Ymxpc2hlZCBub3cnfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgIH0gXG4gICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IHN0YXR1czogNDA0LCAgJ21lc3NhZ2UnOidhcnRpY2xlIG5vdCBmb3VuZCEnfSk7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgfVxuICAgICAgICAgICBzdGF0aWMgZmxhZ0FydGljbGUocmVxLCByZXMpe1xuXG5cbiAgICAgICAgICAgIGNvbnN0IGZpbmRBcnRpY2xlID0gICBhcnRpY2xlcy5maW5kKHQgPT4gdC5hcnRpY2xlX2lkID09PSBwYXJzZUludChyZXEucGFyYW1zLmFydGljbGVfaWQpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoZmluZEFydGljbGUpe1xuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGZpbmRBcnRpY2xlLmluYXBwcm9wcmlhdGU9KytmaW5kQXJ0aWNsZS5pbmFwcHJvcHJpYXRlO1xuICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgc3RhdHVzOiAyMDAsICdtZXNzYWdlJzogJ2FydGljbGUgc3VjY2Vzc2Z1bGx5IGZsYWdlZCcsIGRhdGE6IHt0aXRsZTpmaW5kQXJ0aWNsZS50aXRsZSxcbiAgICAgICAgICAgICAgYXJ0aWNsZTpmaW5kQXJ0aWNsZS5hcnRpY2xlLFxuICAgICAgICAgICAgICBjcmVhdGVkT246ZmluZEFydGljbGUuY3JlYXRlZE9uLFxuICAgICAgICAgICAgICBpbmFwcHJvcHJpYXRlOmZpbmRBcnRpY2xlLmluYXBwcm9wcmlhdGV9fSk7XG4gICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgc3RhdHVzOiA0MDQsICAnbWVzc2FnZSc6J0FydGljbGUgbm90IGZvdW5kISd9KTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgIHN0YXRpYyBmbGFnQ29tbWVudChyZXEsIHJlcyl7XG5cblxuICAgICAgICAgICAgICBjb25zdCBmaW5kQ29tbWVudCA9ICAgY29tbWVudHMuZmluZCh0ID0+IHQuY29tbWVudF9pZCA9PT0gcGFyc2VJbnQocmVxLnBhcmFtcy5jb21tZW50X2lkKSk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZihmaW5kQ29tbWVudCl7XG4gICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZpbmRDb21tZW50LmluYXBwcm9wcmlhdGU9KytmaW5kQ29tbWVudC5pbmFwcHJvcHJpYXRlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7IHN0YXR1czogMjAwLCAnbWVzc2FnZSc6ICdjb21tZW50IHN1Y2Nlc3NmdWxseSBmbGFnZWQnLCBkYXRhOiB7XG4gICAgICAgICAgICAgICAgY29tbWVudDpmaW5kQ29tbWVudC5jb21tZW50LFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRPbjpmaW5kQ29tbWVudC5jcmVhdGVkT24sXG4gICAgICAgICAgICAgICAgaW5hcHByb3ByaWF0ZTpmaW5kQ29tbWVudC5pbmFwcHJvcHJpYXRlfX0pO1xuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBzdGF0dXM6IDQwNCwgICdtZXNzYWdlJzonY29tbWVudCBub3QgZm91bmQhJ30pO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgIHN0YXRpYyAgZmlsdGVyQXJ0aWNsZShyZXEsIHJlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbmRBcnRpY2xlID0gICBhcnRpY2xlcy5maWx0ZXIodCA9PiB0LmNhdGVnb3J5ID09PSByZXEucXVlcnkuY2F0ZWdvcnkpO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYoZmluZEFydGljbGUpe1xuICAgICAgICAgICAgICAgICAgLy9maW5kQXJ0aWNsZS5zb3J0KCk7XG4gICAgICAgICAgICAgICAgIGZpbmRBcnRpY2xlLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgc3RhdHVzOiAyMDAsICdtZXNzYWdlJzogJ3N1Y2Nlc3MnLCBkYXRhOmZpbmRBcnRpY2xlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgc3RhdHVzOiA0MDQsICAnbWVzc2FnZSc6J2FydGljbGUgbm90IGZvdW5kISd9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuXG5cblxuXG59XG5leHBvcnQgZGVmYXVsdCBBcnRpY2xlOyJdfQ==