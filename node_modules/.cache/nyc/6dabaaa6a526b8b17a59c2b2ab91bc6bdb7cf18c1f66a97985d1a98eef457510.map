{"version":3,"sources":["user.js"],"names":["UserController","req","res","newUser","users","length","body","first_name","last_name","email","password","gender","jobRole","department","address","i","status","send","message","token","push","data","pld","user_id","is_admin"],"mappings":";;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;;;AAEA;IACMA,c;;;;;;;;;AAEF;iCACqBC,G,EAAKC,G,EAAK;AAE/B,UAAMC,OAAO,GAAG,yBAChBC,kBAAMC,MAAN,GAAe,CADC,EAEhBJ,GAAG,CAACK,IAAJ,CAASC,UAFO,EAGhBN,GAAG,CAACK,IAAJ,CAASE,SAHO,EAIhBP,GAAG,CAACK,IAAJ,CAASG,KAJO,EAKhB,0BAAYR,GAAG,CAACK,IAAJ,CAASI,QAArB,CALgB,EAMhBT,GAAG,CAACK,IAAJ,CAASK,MANO,EAOhBV,GAAG,CAACK,IAAJ,CAASM,OAPO,EAQhBX,GAAG,CAACK,IAAJ,CAASO,UARO,EAShBZ,GAAG,CAACK,IAAJ,CAASQ,OATO,EAUhB,KAVgB,CAAhB;;AAgBA,WAAK,IAAIC,CAAC,GAAE,CAAZ,EAAeA,CAAC,GAACX,kBAAMC,MAAvB,EAA8BU,CAAC,EAA/B,EAAkC;AAE9B,YAAGX,kBAAMW,CAAN,EAASN,KAAT,KAAiBR,GAAG,CAACK,IAAJ,CAASG,KAA7B,EAEE,OAAOP,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAED,UAAAA,MAAM,EAAE,GAAV;AAAeE,UAAAA,OAAO,EAAE;AAAxB,SAArB,CAAP;AAGG;;AACT,UAAMC,KAAK,GAAG,4BAAchB,OAAd,CAAd;;AACAC,wBAAMgB,IAAN,CAAWjB,OAAX;;AAEA,aAAOD,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAED,QAAAA,MAAM,EAAE,GAAV;AAAeE,QAAAA,OAAO,EAAC,YAAvB;AAAoCG,QAAAA,IAAI;AAAIF,UAAAA,KAAK,EAALA;AAAJ,WAAahB,OAAb;AAAxC,OAArB,CAAP;AAEC,K,CAKA;;;;0BACSF,G,EAAKC,G,EAAK;AAAA,sBAGED,GAAG,CAACK,IAHN;AAAA,UAGfG,KAHe,aAGfA,KAHe;AAAA,UAGRC,QAHQ,aAGRA,QAHQ;;AAMtB,WAAK,IAAIK,CAAC,GAAE,CAAZ,EAAeA,CAAC,GAACX,kBAAMC,MAAvB,EAA8BU,CAAC,EAA/B,EAAkC;AAE9B,YAAIX,kBAAMW,CAAN,EAASN,KAAT,KAAiBA,KAAlB,IAA6B,4BAAcL,kBAAMW,CAAN,EAASL,QAAvB,EAAgCA,QAAhC,CAAhC,EAA2E;AACzE,cAAMY,GAAG,GAAE,yBACVlB,kBAAMW,CAAN,EAASQ,OADC,EAEVnB,kBAAMW,CAAN,EAASR,UAFC,EAGVH,kBAAMW,CAAN,EAASP,SAHC,EAIVJ,kBAAMW,CAAN,EAASN,KAJC,EAKVL,kBAAMW,CAAN,EAASL,QALC,EAMVN,kBAAMW,CAAN,EAASJ,MANC,EAOVP,kBAAMW,CAAN,EAASH,OAPC,EAQVR,kBAAMW,CAAN,EAASF,UARC,EASVT,kBAAMW,CAAN,EAASS,QATC,EAUV,KAVU,CAAX;AAaE,cAAML,KAAK,GAAG,4BAAcG,GAAd,CAAd;AACA,iBAAOpB,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAED,YAAAA,MAAM,EAAE,GAAV;AAAeE,YAAAA,OAAO,EAAC,YAAvB;AAAoCG,YAAAA,IAAI;AAAIF,cAAAA,KAAK,EAALA;AAAJ,eAAaG,GAAb;AAAxC,WAArB,CAAP;AACI;AACH;;AAEL,aAAOpB,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAED,QAAAA,MAAM,EAAE,GAAV;AAAc,mBAAU;AAAxB,OAArB,CAAP;AAGH;;;;;eAEYhB,c","sourceRoot":"/private/var/root/Documents/Teamwork/server/controllers","sourcesContent":["import {generateToken,encryptPass,checkPassword} from './../helpers';\nimport users from '../model/users';\nimport payLoad from './payload';\n\n//class contain all user operation\nclass UserController {\n    \n    // new user \n    static  registerUser(req, res) {\n    \n    const newUser = payLoad(\n    users.length + 1,\n    req.body.first_name,\n    req.body.last_name,\n    req.body.email,\n    encryptPass(req.body.password),\n    req.body.gender,\n    req.body.jobRole,\n    req.body.department,\n    req.body.address,\n    false\n\n    );\n\n  \n      \n    for (let i =0; i<users.length;i++){\n      \n        if(users[i].email===req.body.email )\n           \n          return res.status(409).send({ status: 409, message: \"choose another email this was taken\" });\n          \n               \n            }\n    const token = generateToken(newUser);\n    users.push(newUser);\n    \n    return res.status(201).send({ status: 201, message:'succefully',data: { token,...newUser} });\n    \n    }\n\n\n\n\n     // user signin function\nstatic  login(req, res) {\n\n\n  const {email, password}=req.body;\n  \n  \n  for (let i =0; i<users.length;i++){\n  \n      if((users[i].email===email) && (checkPassword(users[i].password,password))){\n        const pld= payLoad(           \n         users[i].user_id,\n         users[i].first_name,\n         users[i].last_name,\n         users[i].email,\n         users[i].password,\n         users[i].gender,\n         users[i].jobRole,\n         users[i].department,\n         users[i].is_admin,\n         false\n\n          ) ;\n          const token = generateToken(pld);\n          return res.status(200).send({ status: 200, message:'succefully',data: { token,...pld} });\n             }\n          }\n  \n      return res.status(401).send({ status: 401,'message':'User not found!' });\n  \n  \n  }\n}\nexport default UserController;"]}