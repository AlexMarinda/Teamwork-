{"version":3,"sources":["validation.js"],"names":["Validation","req","res","next","schema","Joi","object","keys","title","string","trim","min","max","required","article","checkValidator","comment","email","minDomainSegments","first_name","strict","regex","last_name","alphanum","gender","jobRole","validate","body","abortEarly","convert","error","errors","details","errArr","forEach","err","push","message","split","join","status","json"],"mappings":"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","sourceRoot":"/private/var/root/Documents/teamwork-backend/server/middleware","sourcesContent":["import Joi from '@hapi/joi';\n\n\n // all validation operation \n export class Validation {\n \n// article attributes validator\n  static createArticleValidator(req, res, next) {\n    const schema = Joi.object().keys({\n        title: Joi.string()\n        .trim()\n        .min(2)\n        .max(50)\n        .required(),\n        article: Joi.string()\n        .trim()\n        .min(10)\n        .max(500)\n        .required(),    \n    });\n\n    checkValidator(req, res, schema, next);\n  }\n\n // comment  attributes validator\n\n static createCommentValidator(req, res, next) {\n  const schema = Joi.object().keys({\n    comment: Joi.string()\n      .min(2)\n      .max(50)\n      .required(),\n\n\n\n  });\n  checkValidator(req, res, schema, next);\n}\n\n // edit article  attributes validator\n\n static editArticleValidator(req, res, next) {\n    const schema = Joi.object().keys({\n      article: Joi.string()\n        .min(10)\n        .max(500)\n        .required(),\n  \n  \n  \n    });\n    checkValidator(req, res, schema, next);\n  }\n  \n  // user attributes validator\n\n  static userValidator(req, res, next) {\n    const schema = Joi.object().keys({\n      email: Joi.string()\n        .email({ minDomainSegments: 2 })\n        .required(),\n      first_name: Joi.string()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(2)\n        .max(30)\n        .required(),\n      last_name: Joi.string()\n        .alphanum()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(2)\n        .max(30)\n        .required(),\n        gender: Joi.string()\n        .alphanum()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(4)\n        .max(6)\n        .required(),\n        jobRole: Joi.string()\n        .alphanum()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(2)\n        .required(),\n        jobRole: Joi.string()\n        .alphanum()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(2)\n        .required(),\n      password: Joi.string()\n        .min(7)\n        .max(50)\n        .required(),\n      department: Joi.string()\n        .alphanum()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(2)\n        .required(),\n      address: Joi.string()\n        .alphanum()\n        .strict()\n        .trim()\n        .regex(/^([a-zA-Z]+\\s)*[a-zA-Z]+$/)\n        .min(2)\n        .required(),\n\n    });\n    checkValidator(req, res, schema, next);\n\n\n\n  }\n\n\n\n}\n\nexport const checkValidator = (req, res, schema, next) => {\n  const { error } = Joi.validate(req.body, schema, {abortEarly: false,convert: true });\n  if (error) {\n    const errors = [];\n    const { details: errArr = [] } = error || {};\n    errArr.forEach(err => {\n      errors.push(err.message.split('\"').join(''));\n    });\n    return res.status(400).json({ status: 400, message:errors});\n \n  }\n  return next();\n\n};\n\n\n"]}