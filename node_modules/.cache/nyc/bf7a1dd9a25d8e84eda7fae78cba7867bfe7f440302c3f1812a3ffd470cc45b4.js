"use strict";var cov_2bmzm4vrhm=function(){var path="/private/var/root/Documents/teamwork-backend/server/controllers/article.js";var hash="266048b21eb57499abd08e037194655f1f49c3d9";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/private/var/root/Documents/teamwork-backend/server/controllers/article.js",statementMap:{"0":{start:{line:3,column:29},end:{line:3,column:84}},"1":{start:{line:5,column:0},end:{line:7,column:3}},"2":{start:{line:8,column:0},end:{line:8,column:28}},"3":{start:{line:10,column:23},end:{line:10,column:95}},"4":{start:{line:12,column:23},end:{line:12,column:95}},"5":{start:{line:14,column:20},end:{line:14,column:89}},"6":{start:{line:16,column:15},end:{line:16,column:66}},"7":{start:{line:18,column:15},end:{line:18,column:66}},"8":{start:{line:20,column:14},end:{line:20,column:55}},"9":{start:{line:22,column:20},end:{line:22,column:67}},"10":{start:{line:24,column:15},end:{line:24,column:36}},"11":{start:{line:26,column:54},end:{line:26,column:73}},"12":{start:{line:26,column:75},end:{line:26,column:326}},"13":{start:{line:26,column:125},end:{line:26,column:161}},"14":{start:{line:26,column:163},end:{line:26,column:292}},"15":{start:{line:26,column:183},end:{line:26,column:292}},"16":{start:{line:26,column:225},end:{line:26,column:288}},"17":{start:{line:26,column:293},end:{line:26,column:324}},"18":{start:{line:26,column:327},end:{line:26,column:339}},"19":{start:{line:28,column:33},end:{line:28,column:518}},"20":{start:{line:28,column:46},end:{line:28,column:47}},"21":{start:{line:28,column:91},end:{line:28,column:131}},"22":{start:{line:28,column:133},end:{line:28,column:516}},"23":{start:{line:28,column:146},end:{line:28,column:256}},"24":{start:{line:28,column:193},end:{line:28,column:252}},"25":{start:{line:28,column:264},end:{line:28,column:516}},"26":{start:{line:28,column:304},end:{line:28,column:378}},"27":{start:{line:28,column:388},end:{line:28,column:514}},"28":{start:{line:28,column:429},end:{line:28,column:510}},"29":{start:{line:28,column:519},end:{line:28,column:533}},"30":{start:{line:32,column:0},end:{line:171,column:3}},"31":{start:{line:34,column:4},end:{line:34,column:52}},"32":{start:{line:37,column:2},end:{line:169,column:6}},"33":{start:{line:40,column:20},end:{line:40,column:92}},"34":{start:{line:42,column:23},end:{line:49,column:7}},"35":{start:{line:51,column:6},end:{line:51,column:43}},"36":{start:{line:53,column:6},end:{line:57,column:9}},"37":{start:{line:53,column:22},end:{line:57,column:9}},"38":{start:{line:58,column:6},end:{line:61,column:9}},"39":{start:{line:66,column:20},end:{line:66,column:92}},"40":{start:{line:68,column:24},end:{line:70,column:8}},"41":{start:{line:69,column:8},end:{line:69,column:64}},"42":{start:{line:72,column:6},end:{line:95,column:7}},"43":{start:{line:73,column:8},end:{line:89,column:9}},"44":{start:{line:74,column:10},end:{line:74,column:53}},"45":{start:{line:76,column:10},end:{line:83,column:13}},"46":{start:{line:85,column:10},end:{line:88,column:13}},"47":{start:{line:91,column:8},end:{line:94,column:11}},"48":{start:{line:100,column:20},end:{line:100,column:92}},"49":{start:{line:102,column:24},end:{line:104,column:8}},"50":{start:{line:103,column:8},end:{line:103,column:64}},"51":{start:{line:106,column:6},end:{line:128,column:7}},"52":{start:{line:107,column:8},end:{line:122,column:9}},"53":{start:{line:108,column:10},end:{line:108,column:49}},"54":{start:{line:109,column:10},end:{line:116,column:13}},"55":{start:{line:118,column:10},end:{line:121,column:13}},"56":{start:{line:124,column:8},end:{line:127,column:11}},"57":{start:{line:133,column:24},end:{line:135,column:8}},"58":{start:{line:134,column:8},end:{line:134,column:64}},"59":{start:{line:137,column:24},end:{line:139,column:8}},"60":{start:{line:138,column:8},end:{line:138,column:64}},"61":{start:{line:141,column:6},end:{line:163,column:7}},"62":{start:{line:141,column:23},end:{line:163,column:7}},"63":{start:{line:142,column:24},end:{line:146,column:10}},"64":{start:{line:147,column:8},end:{line:157,column:11}},"65":{start:{line:159,column:8},end:{line:162,column:11}},"66":{start:{line:164,column:6},end:{line:167,column:9}},"67":{start:{line:170,column:2},end:{line:170,column:17}},"68":{start:{line:173,column:15},end:{line:173,column:22}},"69":{start:{line:174,column:0},end:{line:174,column:30}}},fnMap:{"0":{name:"ownKeys",decl:{start:{line:26,column:9},end:{line:26,column:16}},loc:{start:{line:26,column:41},end:{line:26,column:341}},line:26},"1":{name:"(anonymous_1)",decl:{start:{line:26,column:208},end:{line:26,column:209}},loc:{start:{line:26,column:223},end:{line:26,column:290}},line:26},"2":{name:"_objectSpread",decl:{start:{line:28,column:9},end:{line:28,column:22}},loc:{start:{line:28,column:31},end:{line:28,column:535}},line:28},"3":{name:"(anonymous_3)",decl:{start:{line:28,column:176},end:{line:28,column:177}},loc:{start:{line:28,column:191},end:{line:28,column:254}},line:28},"4":{name:"(anonymous_4)",decl:{start:{line:28,column:412},end:{line:28,column:413}},loc:{start:{line:28,column:427},end:{line:28,column:512}},line:28},"5":{name:"(anonymous_5)",decl:{start:{line:32,column:0},end:{line:32,column:1}},loc:{start:{line:32,column:12},end:{line:171,column:1}},line:32},"6":{name:"Article",decl:{start:{line:33,column:11},end:{line:33,column:18}},loc:{start:{line:33,column:21},end:{line:35,column:3}},line:33},"7":{name:"createArticle",decl:{start:{line:39,column:20},end:{line:39,column:33}},loc:{start:{line:39,column:44},end:{line:62,column:5}},line:39},"8":{name:"deleteArticle",decl:{start:{line:65,column:20},end:{line:65,column:33}},loc:{start:{line:65,column:44},end:{line:96,column:5}},line:65},"9":{name:"(anonymous_9)",decl:{start:{line:68,column:49},end:{line:68,column:50}},loc:{start:{line:68,column:62},end:{line:70,column:7}},line:68},"10":{name:"editArticle",decl:{start:{line:99,column:20},end:{line:99,column:31}},loc:{start:{line:99,column:42},end:{line:129,column:5}},line:99},"11":{name:"(anonymous_11)",decl:{start:{line:102,column:49},end:{line:102,column:50}},loc:{start:{line:102,column:62},end:{line:104,column:7}},line:102},"12":{name:"getSpecificArticle",decl:{start:{line:132,column:20},end:{line:132,column:38}},loc:{start:{line:132,column:49},end:{line:168,column:5}},line:132},"13":{name:"(anonymous_13)",decl:{start:{line:133,column:49},end:{line:133,column:50}},loc:{start:{line:133,column:62},end:{line:135,column:7}},line:133},"14":{name:"(anonymous_14)",decl:{start:{line:137,column:49},end:{line:137,column:50}},loc:{start:{line:137,column:62},end:{line:139,column:7}},line:137}},branchMap:{"0":{loc:{start:{line:26,column:75},end:{line:26,column:326}},type:"if",locations:[{start:{line:26,column:75},end:{line:26,column:326}},{start:{line:26,column:75},end:{line:26,column:326}}],line:26},"1":{loc:{start:{line:26,column:163},end:{line:26,column:292}},type:"if",locations:[{start:{line:26,column:163},end:{line:26,column:292}},{start:{line:26,column:163},end:{line:26,column:292}}],line:26},"2":{loc:{start:{line:28,column:91},end:{line:28,column:131}},type:"cond-expr",locations:[{start:{line:28,column:114},end:{line:28,column:126}},{start:{line:28,column:129},end:{line:28,column:131}}],line:28},"3":{loc:{start:{line:28,column:133},end:{line:28,column:516}},type:"if",locations:[{start:{line:28,column:133},end:{line:28,column:516}},{start:{line:28,column:133},end:{line:28,column:516}}],line:28},"4":{loc:{start:{line:28,column:264},end:{line:28,column:516}},type:"if",locations:[{start:{line:28,column:264},end:{line:28,column:516}},{start:{line:28,column:264},end:{line:28,column:516}}],line:28},"5":{loc:{start:{line:53,column:6},end:{line:57,column:9}},type:"if",locations:[{start:{line:53,column:6},end:{line:57,column:9}},{start:{line:53,column:6},end:{line:57,column:9}}],line:53},"6":{loc:{start:{line:72,column:6},end:{line:95,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:95,column:7}},{start:{line:72,column:6},end:{line:95,column:7}}],line:72},"7":{loc:{start:{line:73,column:8},end:{line:89,column:9}},type:"if",locations:[{start:{line:73,column:8},end:{line:89,column:9}},{start:{line:73,column:8},end:{line:89,column:9}}],line:73},"8":{loc:{start:{line:106,column:6},end:{line:128,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:128,column:7}},{start:{line:106,column:6},end:{line:128,column:7}}],line:106},"9":{loc:{start:{line:107,column:8},end:{line:122,column:9}},type:"if",locations:[{start:{line:107,column:8},end:{line:122,column:9}},{start:{line:107,column:8},end:{line:122,column:9}}],line:107},"10":{loc:{start:{line:141,column:6},end:{line:163,column:7}},type:"if",locations:[{start:{line:141,column:6},end:{line:163,column:7}},{start:{line:141,column:6},end:{line:163,column:7}}],line:141},"11":{loc:{start:{line:141,column:23},end:{line:163,column:7}},type:"if",locations:[{start:{line:141,column:23},end:{line:163,column:7}},{start:{line:141,column:23},end:{line:163,column:7}}],line:141}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"266048b21eb57499abd08e037194655f1f49c3d9"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var _interopRequireDefault=(cov_2bmzm4vrhm.s[0]++,require("@babel/runtime/helpers/interopRequireDefault"));cov_2bmzm4vrhm.s[1]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2bmzm4vrhm.s[2]++;exports["default"]=void 0;var _defineProperty2=(cov_2bmzm4vrhm.s[3]++,_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")));var _classCallCheck2=(cov_2bmzm4vrhm.s[4]++,_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")));var _createClass2=(cov_2bmzm4vrhm.s[5]++,_interopRequireDefault(require("@babel/runtime/helpers/createClass")));var _article=(cov_2bmzm4vrhm.s[6]++,_interopRequireDefault(require("../model/article")));var _comment=(cov_2bmzm4vrhm.s[7]++,_interopRequireDefault(require("../model/comment")));var _moment=(cov_2bmzm4vrhm.s[8]++,_interopRequireDefault(require("moment")));var _jsonwebtoken=(cov_2bmzm4vrhm.s[9]++,_interopRequireDefault(require("jsonwebtoken")));var _helpers=(cov_2bmzm4vrhm.s[10]++,require("../helpers"));function ownKeys(object,enumerableOnly){cov_2bmzm4vrhm.f[0]++;var keys=(cov_2bmzm4vrhm.s[11]++,Object.keys(object));cov_2bmzm4vrhm.s[12]++;if(Object.getOwnPropertySymbols){cov_2bmzm4vrhm.b[0][0]++;var symbols=(cov_2bmzm4vrhm.s[13]++,Object.getOwnPropertySymbols(object));cov_2bmzm4vrhm.s[14]++;if(enumerableOnly){cov_2bmzm4vrhm.b[1][0]++;cov_2bmzm4vrhm.s[15]++;symbols=symbols.filter(function(sym){cov_2bmzm4vrhm.f[1]++;cov_2bmzm4vrhm.s[16]++;return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}else{cov_2bmzm4vrhm.b[1][1]++;}cov_2bmzm4vrhm.s[17]++;keys.push.apply(keys,symbols);}else{cov_2bmzm4vrhm.b[0][1]++;}cov_2bmzm4vrhm.s[18]++;return keys;}function _objectSpread(target){cov_2bmzm4vrhm.f[2]++;cov_2bmzm4vrhm.s[19]++;for(var i=(cov_2bmzm4vrhm.s[20]++,1);i<arguments.length;i++){var source=(cov_2bmzm4vrhm.s[21]++,arguments[i]!=null?(cov_2bmzm4vrhm.b[2][0]++,arguments[i]):(cov_2bmzm4vrhm.b[2][1]++,{}));cov_2bmzm4vrhm.s[22]++;if(i%2){cov_2bmzm4vrhm.b[3][0]++;cov_2bmzm4vrhm.s[23]++;ownKeys(source,true).forEach(function(key){cov_2bmzm4vrhm.f[3]++;cov_2bmzm4vrhm.s[24]++;(0,_defineProperty2["default"])(target,key,source[key]);});}else{cov_2bmzm4vrhm.b[3][1]++;cov_2bmzm4vrhm.s[25]++;if(Object.getOwnPropertyDescriptors){cov_2bmzm4vrhm.b[4][0]++;cov_2bmzm4vrhm.s[26]++;Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{cov_2bmzm4vrhm.b[4][1]++;cov_2bmzm4vrhm.s[27]++;ownKeys(source).forEach(function(key){cov_2bmzm4vrhm.f[4]++;cov_2bmzm4vrhm.s[28]++;Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}}cov_2bmzm4vrhm.s[29]++;return target;}var Article=(/*#__PURE__*/cov_2bmzm4vrhm.s[30]++,function(){cov_2bmzm4vrhm.f[5]++;function Article(){cov_2bmzm4vrhm.f[6]++;cov_2bmzm4vrhm.s[31]++;(0,_classCallCheck2["default"])(this,Article);}cov_2bmzm4vrhm.s[32]++;(0,_createClass2["default"])(Article,null,[{key:"createArticle",value:function createArticle(req,res){cov_2bmzm4vrhm.f[7]++;var getUser=(cov_2bmzm4vrhm.s[33]++,_jsonwebtoken["default"].decode(req.headers.authorization.split(' ')[1]));var newArticle=(cov_2bmzm4vrhm.s[34]++,{id:_article["default"].length+1,title:req.body.title,article:req.body.article,createdOn:(0,_moment["default"])().format(),user_id:getUser.user_id,status:"unshare"});cov_2bmzm4vrhm.s[35]++;_article["default"].push(newArticle);cov_2bmzm4vrhm.s[36]++;if(newArticle){cov_2bmzm4vrhm.b[5][0]++;cov_2bmzm4vrhm.s[37]++;res.status(201).send({status:201,message:'article successfully created',data:_objectSpread({},newArticle)});}else{cov_2bmzm4vrhm.b[5][1]++;}cov_2bmzm4vrhm.s[38]++;return res.status(400).send({status:400,'message':'article not created'});}},{key:"deleteArticle",value:function deleteArticle(req,res){cov_2bmzm4vrhm.f[8]++;var getUser=(cov_2bmzm4vrhm.s[39]++,_jsonwebtoken["default"].decode(req.headers.authorization.split(' ')[1]));var findArticle=(cov_2bmzm4vrhm.s[40]++,_article["default"].find(function(t){cov_2bmzm4vrhm.f[9]++;cov_2bmzm4vrhm.s[41]++;return t.article_id===parseInt(req.params.article_id);}));cov_2bmzm4vrhm.s[42]++;if(findArticle){cov_2bmzm4vrhm.b[6][0]++;cov_2bmzm4vrhm.s[43]++;if(getUser.user_id===findArticle.user_id){cov_2bmzm4vrhm.b[7][0]++;cov_2bmzm4vrhm.s[44]++;_article["default"].splice(findArticle,1);cov_2bmzm4vrhm.s[45]++;return res.status(200).send({status:200,'message':'article successfully deleted',data:{title:findArticle.title,article:findArticle.article}});}else{cov_2bmzm4vrhm.b[7][1]++;cov_2bmzm4vrhm.s[46]++;return res.status(400).send({status:400,'message':'You did not make this article with article_id'});}}else{cov_2bmzm4vrhm.b[6][1]++;cov_2bmzm4vrhm.s[47]++;return res.status(400).send({status:404,'message':'article not found!'});}}},{key:"editArticle",value:function editArticle(req,res){cov_2bmzm4vrhm.f[10]++;var getUser=(cov_2bmzm4vrhm.s[48]++,_jsonwebtoken["default"].decode(req.headers.authorization.split(' ')[1]));var findArticle=(cov_2bmzm4vrhm.s[49]++,_article["default"].find(function(t){cov_2bmzm4vrhm.f[11]++;cov_2bmzm4vrhm.s[50]++;return t.article_id===parseInt(req.params.article_id);}));cov_2bmzm4vrhm.s[51]++;if(findArticle){cov_2bmzm4vrhm.b[8][0]++;cov_2bmzm4vrhm.s[52]++;if(getUser.user_id===findArticle.user_id){cov_2bmzm4vrhm.b[9][0]++;cov_2bmzm4vrhm.s[53]++;findArticle.article=req.body.article;cov_2bmzm4vrhm.s[54]++;return res.status(200).send({status:200,'message':'article successfully edited',data:{title:findArticle.title,article:findArticle.article}});}else{cov_2bmzm4vrhm.b[9][1]++;cov_2bmzm4vrhm.s[55]++;return res.status(400).send({status:400,'message':'You did not make this article with article_id'});}}else{cov_2bmzm4vrhm.b[8][1]++;cov_2bmzm4vrhm.s[56]++;return res.status(400).send({status:404,'message':'article not found!'});}}},{key:"getSpecificArticle",value:function getSpecificArticle(req,res){cov_2bmzm4vrhm.f[12]++;var findArticle=(cov_2bmzm4vrhm.s[57]++,_article["default"].find(function(t){cov_2bmzm4vrhm.f[13]++;cov_2bmzm4vrhm.s[58]++;return t.article_id===parseInt(req.params.article_id);}));var findComment=(cov_2bmzm4vrhm.s[59]++,_comment["default"].find(function(t){cov_2bmzm4vrhm.f[14]++;cov_2bmzm4vrhm.s[60]++;return t.article_id===parseInt(req.params.article_id);}));cov_2bmzm4vrhm.s[61]++;if(findArticle){cov_2bmzm4vrhm.b[10][0]++;cov_2bmzm4vrhm.s[62]++;if(findArticle.status==='share'){cov_2bmzm4vrhm.b[11][0]++;var _comments=(cov_2bmzm4vrhm.s[63]++,[{comment_id:findComment.comment_id,comment:findComment.comment,user_id:findComment.user_id}]);cov_2bmzm4vrhm.s[64]++;return res.status(200).send({status:200,'message':'article successfully edited',data:{title:findArticle.title,article:findArticle.article,createdOn:findArticle.createdOn,user_id:findArticle.user_id,comments:_comments}});}else{cov_2bmzm4vrhm.b[11][1]++;cov_2bmzm4vrhm.s[65]++;return res.status(400).send({status:400,'message':'this article is not published now!'});}}else{cov_2bmzm4vrhm.b[10][1]++;}cov_2bmzm4vrhm.s[66]++;return res.status(404).send({status:404,'message':'article not found!'});}}]);cov_2bmzm4vrhm.s[67]++;return Article;}());var _default=(cov_2bmzm4vrhm.s[68]++,Article);cov_2bmzm4vrhm.s[69]++;exports["default"]=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFydGljbGUuanMiXSwibmFtZXMiOlsiQXJ0aWNsZSIsInJlcSIsInJlcyIsImdldFVzZXIiLCJqd3QiLCJkZWNvZGUiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInNwbGl0IiwibmV3QXJ0aWNsZSIsImlkIiwiYXJ0aWNsZXMiLCJsZW5ndGgiLCJ0aXRsZSIsImJvZHkiLCJhcnRpY2xlIiwiY3JlYXRlZE9uIiwiZm9ybWF0IiwidXNlcl9pZCIsInN0YXR1cyIsInB1c2giLCJzZW5kIiwibWVzc2FnZSIsImRhdGEiLCJmaW5kQXJ0aWNsZSIsImZpbmQiLCJ0IiwiYXJ0aWNsZV9pZCIsInBhcnNlSW50IiwicGFyYW1zIiwic3BsaWNlIiwiZmluZENvbW1lbnQiLCJjb21tZW50cyIsImNvbW1lbnRfaWQiLCJjb21tZW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7O0lBRU1BLE87Ozs7Ozs7OztrQ0FJZ0JDLEcsRUFBS0MsRyxFQUFLO0FBQ2hDLFVBQU1DLE9BQU8sR0FBR0MseUJBQUlDLE1BQUosQ0FBV0osR0FBRyxDQUFDSyxPQUFKLENBQVlDLGFBQVosQ0FBMEJDLEtBQTFCLENBQWdDLEdBQWhDLEVBQXFDLENBQXJDLENBQVgsQ0FBaEI7O0FBQ0EsVUFBTUMsVUFBVSxHQUFHO0FBQ25CQyxRQUFBQSxFQUFFLEVBQUNDLG9CQUFTQyxNQUFULEdBQWtCLENBREY7QUFFbkJDLFFBQUFBLEtBQUssRUFBQ1osR0FBRyxDQUFDYSxJQUFKLENBQVNELEtBRkk7QUFHbkJFLFFBQUFBLE9BQU8sRUFBQ2QsR0FBRyxDQUFDYSxJQUFKLENBQVNDLE9BSEU7QUFJbkJDLFFBQUFBLFNBQVMsRUFBQywwQkFBU0MsTUFBVCxFQUpTO0FBS25CQyxRQUFBQSxPQUFPLEVBQUVmLE9BQU8sQ0FBQ2UsT0FMRTtBQU1uQkMsUUFBQUEsTUFBTSxFQUFDO0FBTlksT0FBbkI7O0FBVUlSLDBCQUFTUyxJQUFULENB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Q2lCLE1BQUosQ0FBVyxHQUFYLEVBQWdCRSxJQUFoQixDQUFxQjtBQUFFRixVQUFBQSxNQUFNLEVBQUUsR0FBVjtBQUFlLHFCQUFXLDZCQUExQjtBQUF5REksVUFBQUEsSUFBSSxFQUFFO0FBQ3pGVixZQUFBQSxLQUFLLEVBQUNXLFdBQVcsQ0FBQ1gsS0FEdUU7QUFFekZFLFlBQUFBLE9BQU8sRUFBQ1MsV0FBVyxDQUFDVCxPQUZxRTtBQUd6RkMsWUFBQUEsU0FBUyxFQUFDUSxXQUFXLENBQUNSLFNBSG1FO0FBSXpGRSxZQUFBQSxPQUFPLEVBQUNNLFdBQVcsQ0FBQ04sT0FKcUU7QUFLekZjLFlBQUFBLFFBQVEsRUFBUkE7QUFMeUY7QUFBL0QsU0FBckIsQ0FBUDtBQVNDLE9BbkJMLE1Bb0JRO0FBQ0YsZUFBTzlCLEdBQUcsQ0FBQ2lCLE1BQUosQ0FBVyxHQUFYLEVBQWdCRSxJQUFoQixDQUFxQjtBQUFFRixVQUFBQSxNQUFNLEVBQUUsR0FBVjtBQUFnQixxQkFBVTtBQUExQixTQUFyQixDQUFQO0FBRUQ7QUFDRCxhQUFPakIsR0FBRyxDQUFDaUIsTUFBSixDQUFXLEdBQVgsRUFBZ0JFLElBQWhCLENBQXFCO0FBQUVGLFFBQUFBLE1BQU0sRUFBRSxHQUFWO0FBQWdCLG1CQUFVO0FBQTFCLE9BQXJCLENBQVA7QUFHUDs7Ozs7ZUFNUW5CLE8iLCJzb3VyY2VSb290IjoiL3ByaXZhdGUvdmFyL3Jvb3QvRG9jdW1lbnRzL3RlYW13b3JrLWJhY2tlbmQvc2VydmVyL2NvbnRyb2xsZXJzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFydGljbGVzICBmcm9tICcuLi9tb2RlbC9hcnRpY2xlJztcbmltcG9ydCBjb21tZW50cyBmcm9tICcuLi9tb2RlbC9jb21tZW50JztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCB7ZmluZENvbW1lbnRCeUFydGljbGVJZH0gZnJvbSAnLi4vaGVscGVycyc7XG5cbmNsYXNzIEFydGljbGUge1xuICAgIFxuXG5cbnN0YXRpYyAgY3JlYXRlQXJ0aWNsZShyZXEsIHJlcykge1xuY29uc3QgZ2V0VXNlciA9IGp3dC5kZWNvZGUocmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbi5zcGxpdCgnICcpWzFdKTtcbmNvbnN0IG5ld0FydGljbGUgPSB7XG5pZDphcnRpY2xlcy5sZW5ndGggKyAxLFxudGl0bGU6cmVxLmJvZHkudGl0bGUsXG5hcnRpY2xlOnJlcS5ib2R5LmFydGljbGUsXG5jcmVhdGVkT246bW9tZW50KCkuZm9ybWF0KCksXG51c2VyX2lkOiBnZXRVc2VyLnVzZXJfaWQsXG5zdGF0dXM6XCJ1bnNoYXJlXCJcblxufTtcblxuICAgIGFydGljbGVzLnB1c2gobmV3QXJ0aWNsZSk7XG5cblxuaWYobmV3QXJ0aWNsZSlcbiByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IHN0YXR1czogMjAxLCBtZXNzYWdlOidhcnRpY2xlIHN1Y2Nlc3NmdWxseSBjcmVhdGVkJyxkYXRhOiB7IC4uLm5ld0FydGljbGUgfSB9KTtcbnJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IHN0YXR1czogNDAwLCdtZXNzYWdlJzonYXJ0aWNsZSBub3QgY3JlYXRlZCcgfSk7XG5cbn1cblxuc3RhdGljICBkZWxldGVBcnRpY2xlIChyZXEsIHJlcykge1xuICBjb25zdCBnZXRVc2VyID0gand0LmRlY29kZShyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uLnNwbGl0KCcgJylbMV0pO1xuICAgIGNvbnN0IGZpbmRBcnRpY2xlID0gICBhcnRpY2xlcy5maW5kKHQgPT4gdC5hcnRpY2xlX2lkID09PSBwYXJzZUludChyZXEucGFyYW1zLmFydGljbGVfaWQpKTtcbiAgICBpZihmaW5kQXJ0aWNsZSl7XG4gICAgICAgXG4gICAgICAgaWYoZ2V0VXNlci51c2VyX2lkID09PSBmaW5kQXJ0aWNsZS51c2VyX2lkKXtcbiAgICAgICBhcnRpY2xlcy5zcGxpY2UoZmluZEFydGljbGUsMSk7XG5cbiAgXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZCh7IHN0YXR1czogMjAwLCAnbWVzc2FnZSc6ICdhcnRpY2xlIHN1Y2Nlc3NmdWxseSBkZWxldGVkJywgZGF0YToge1xuICAgICAgICAgIHRpdGxlOmZpbmRBcnRpY2xlLnRpdGxlLFxuICAgICAgICAgIGFydGljbGU6ZmluZEFydGljbGUuYXJ0aWNsZX19KTtcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IHN0YXR1czogNDAwLCAnbWVzc2FnZSc6J1lvdSBkaWQgbm90IG1ha2UgdGhpcyBhcnRpY2xlIHdpdGggYXJ0aWNsZV9pZCd9KTtcbiAgICAgIH1cbiAgICAgfSBcbiAgICAgZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgc3RhdHVzOiA0MDQsICAnbWVzc2FnZSc6J2FydGljbGUgbm90IGZvdW5kISd9KTtcbiAgICAgfVxuICAgICB9XG5cblxuICAgICBzdGF0aWMgIGVkaXRBcnRpY2xlIChyZXEsIHJlcykge1xuICAgICAgY29uc3QgZ2V0VXNlciA9IGp3dC5kZWNvZGUocmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbi5zcGxpdCgnICcpWzFdKTtcbiAgICAgICAgY29uc3QgZmluZEFydGljbGUgPSAgIGFydGljbGVzLmZpbmQodCA9PiB0LmFydGljbGVfaWQgPT09IHBhcnNlSW50KHJlcS5wYXJhbXMuYXJ0aWNsZV9pZCkpO1xuICAgICAgICBpZihmaW5kQXJ0aWNsZSl7XG4gICAgICAgICAgIFxuICAgICAgICAgICBpZihnZXRVc2VyLnVzZXJfaWQgPT09IGZpbmRBcnRpY2xlLnVzZXJfaWQpe1xuXG4gICAgICAgICAgICBmaW5kQXJ0aWNsZS5hcnRpY2xlID0gcmVxLmJvZHkuYXJ0aWNsZTtcbiAgICBcbiAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgc3RhdHVzOiAyMDAsICdtZXNzYWdlJzogJ2FydGljbGUgc3VjY2Vzc2Z1bGx5IGVkaXRlZCcsIGRhdGE6IHtcbiAgICAgICAgICAgICAgdGl0bGU6ZmluZEFydGljbGUudGl0bGUsXG4gICAgICAgICAgICAgIGFydGljbGU6ZmluZEFydGljbGUuYXJ0aWNsZX19KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IHN0YXR1czogNDAwLCAnbWVzc2FnZSc6J1lvdSBkaWQgbm90IG1ha2UgdGhpcyBhcnRpY2xlIHdpdGggYXJ0aWNsZV9pZCd9KTtcbiAgICAgICAgICB9XG4gICAgICAgICB9IFxuICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IHN0YXR1czogNDA0LCAgJ21lc3NhZ2UnOidhcnRpY2xlIG5vdCBmb3VuZCEnfSk7XG4gICAgICAgICB9XG4gICAgICAgICB9XG5cblxuICAgICAgICAgc3RhdGljICBnZXRTcGVjaWZpY0FydGljbGUocmVxLCByZXMpIHtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBmaW5kQXJ0aWNsZSA9ICAgYXJ0aWNsZXMuZmluZCh0ID0+IHQuYXJ0aWNsZV9pZCA9PT0gcGFyc2VJbnQocmVxLnBhcmFtcy5hcnRpY2xlX2lkKSk7XG4gICAgICAgICAgY29uc3QgZmluZENvbW1lbnQgPSAgIGNvbW1lbnRzLmZpbmQodCA9PiB0LmFydGljbGVfaWQgPT09IHBhcnNlSW50KHJlcS5wYXJhbXMuYXJ0aWNsZV9pZCkpO1xuICBcbiAgICAgICAgICBcbiAgICAgICAgICBcbiAgICAgICAgICBpZihmaW5kQXJ0aWNsZSlcbiAgICAgICAgICBpZihmaW5kQXJ0aWNsZS5zdGF0dXM9PT0nc2hhcmUnKXtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRzID0gW3tcbiAgICAgICAgICAgICAgY29tbWVudF9pZDpmaW5kQ29tbWVudC5jb21tZW50X2lkLFxuICAgICAgICAgICAgICBjb21tZW50OmZpbmRDb21tZW50LmNvbW1lbnQsXG4gICAgICAgICAgICAgIHVzZXJfaWQ6ZmluZENvbW1lbnQudXNlcl9pZCxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG5cblxuICBcbiAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgc3RhdHVzOiAyMDAsICdtZXNzYWdlJzogJ2FydGljbGUgc3VjY2Vzc2Z1bGx5IGVkaXRlZCcsIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB0aXRsZTpmaW5kQXJ0aWNsZS50aXRsZSxcbiAgICAgICAgICAgICAgICBhcnRpY2xlOmZpbmRBcnRpY2xlLmFydGljbGUsXG4gICAgICAgICAgICAgICAgY3JlYXRlZE9uOmZpbmRBcnRpY2xlLmNyZWF0ZWRPbixcbiAgICAgICAgICAgICAgICB1c2VyX2lkOmZpbmRBcnRpY2xlLnVzZXJfaWQsXG4gICAgICAgICAgICAgICAgY29tbWVudHN9fSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgc3RhdHVzOiA0MDAsICAnbWVzc2FnZSc6J3RoaXMgYXJ0aWNsZSBpcyBub3QgcHVibGlzaGVkIG5vdyEnfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgc3RhdHVzOiA0MDQsICAnbWVzc2FnZSc6J2FydGljbGUgbm90IGZvdW5kISd9KTtcbiAgICAgICAgICBcbiAgICAgIFxuICAgICAgfVxuXG5cblxuXG59XG5leHBvcnQgZGVmYXVsdCBBcnRpY2xlOyJdfQ==